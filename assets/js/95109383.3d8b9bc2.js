"use strict";(globalThis.webpackChunkdoqumentation=globalThis.webpackChunkdoqumentation||[]).push([[3265],{64352(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/install-c-api","title":"Install the Qiskit C API","description":"How to install and use the Qiskit C API as standalone library","source":"@site/i18n/tl/docusaurus-plugin-content-docs/current/guides/install-c-api.mdx","sourceDirName":"guides","slug":"/guides/install-c-api","permalink":"/guides/install-c-api","draft":false,"unlisted":false,"editUrl":"https://github.com/JanLahmann/doQumentation/tree/main/docs/guides/install-c-api.mdx","tags":[],"version":"current","frontMatter":{"title":"Install the Qiskit C API","description":"How to install and use the Qiskit C API as standalone library"},"sidebar":"tutorialsSidebar","previous":{"title":"Configure the Qiskit SDK locally","permalink":"/guides/configure-qiskit-local"},"next":{"title":"Extend Qiskit in Python with C","permalink":"/guides/c-extension-for-python"}}');var s=i(74848),l=i(28453);const r={title:"Install the Qiskit C API",description:"How to install and use the Qiskit C API as standalone library"},o="Install the Qiskit C API",a={},d=[{value:"UNIX-like",id:"unix-like",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Build",id:"build",level:3},{value:"Windows",id:"windows",level:2},{value:"Requirements",id:"requirements-1",level:3},{value:"Build",id:"build-1",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:["\n",(0,s.jsx)(n.admonition,{title:"Hindi pa naisalin",type:"note",children:(0,s.jsx)(n.p,{children:"Ang pahinang ito ay hindi pa naisalin. Nakikita mo ang orihinal na bersyon sa Ingles."})}),"\n","\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"install-the-qiskit-c-api",children:"Install the Qiskit C API"})}),"\n",(0,s.jsxs)(n.p,{children:["This guide describes how to install and use the Qiskit C API. To see how to extend your\nQiskit Python workflow with C, read ",(0,s.jsx)(n.a,{href:"/guides/c-extension-for-python",children:"Extend Python with the Qiskit C API"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"The following example builds an observable with C:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:'// file: example.c\n#include <stdio.h>\n#include <stdint.h>\n#include <qiskit.h>\n\nint main(int argc, char *argv[]) {\n    // build a 100-qubit empty observable\n    uint32_t num_qubits = 100;\n    QkObs *obs = qk_obs_zero(num_qubits);\n\n    // add the term 2 * (X0 Y1 Z2) to the observable\n    QkComplex64 coeff = {2, 0};\n    QkBitTerm bit_terms[3] = {QkBitTerm_X, QkBitTerm_Y, QkBitTerm_Z};  // bit terms: X Y Z\n    uint32_t indices[3] = {0, 1, 2};  // indices: 0 1 2\n    QkObsTerm term = {coeff, 3, bit_terms, indices, num_qubits};\n    qk_obs_add_term(obs, &term);  // append the term\n\n    // print some properties and the observable itself\n    printf("num_qubits: %i\\n", qk_obs_num_qubits(obs));\n    printf("num_terms: %lu\\n", qk_obs_num_terms(obs));\n    printf("observable: %s\\n", qk_obs_str(obs));\n\n    // free the memory allocated for the observable\n    qk_obs_free(obs);\n\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"unix-like",children:"UNIX-like"}),"\n",(0,s.jsx)(n.p,{children:"This section provides build instructions for UNIX-like systems."}),"\n",(0,s.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(n.p,{children:"Compilation requires the following tools:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A Rust compiler: see for example the ",(0,s.jsx)(n.a,{href:"/guides/install-qiskit-source",children:"guide on installing Qiskit from source"})]}),"\n",(0,s.jsxs)(n.li,{children:["A C compiler: for example, GCC on Linux and Clang on MacOS. Qiskit's C API is compatible with a compiler conforming to the ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/C11_(C_standard_revision)",children:"C11"})," standard."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/mozilla/cbindgen",children:(0,s.jsx)(n.code,{children:"cbindgen"})}),": a tool to create the C header, which you can install with ",(0,s.jsx)(n.code,{children:"cargo install cbindgen"}),"\nNote that running the tool from the command line should be enabled, which might require exporting your ",(0,s.jsx)(n.code,{children:"PATH"})," variable to include ",(0,s.jsx)(n.code,{children:"/path/to/.cargo/bin"})]}),"\n",(0,s.jsxs)(n.li,{children:["Python library installed (Python 3.9+): The Python library is required during dynamic linking. Notice that Python is not used at runtime and the interpreter is never initialized; only some symbols from ",(0,s.jsx)(n.code,{children:"libpython"})," need to be defined. See ",(0,s.jsx)(n.a,{href:"https://github.com/Qiskit/qiskit/issues/14240",children:"this issue"})," for more details"]}),"\n",(0,s.jsx)(n.li,{children:"(GNU) Make: this is optional but is recommended to use automated install processes."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This code verifies that everything has been installed:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"rustc --version\ngcc --version\ncbindgen --version\nmake --version  # optional, but recommended\n"})}),"\n",(0,s.jsx)(n.h3,{id:"build",children:"Build"}),"\n",(0,s.jsxs)(n.p,{children:["To build the C header and library, you can run the following Make command",(0,s.jsx)(n.sup,{children:(0,s.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})," in Qiskit root,"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"make c\n"})}),"\n",(0,s.jsxs)(n.p,{children:["which will provide the compiled shared library in ",(0,s.jsx)(n.code,{children:"dist/c/lib"})," and the ",(0,s.jsx)(n.code,{children:"qiskit.h"})," header with\nall function declarations in ",(0,s.jsx)(n.code,{children:"dist/c/include"}),". Note that the precise library name depends\non the platform; for example,",(0,s.jsx)(n.code,{children:"libqiskit.so"})," on UNIX and ",(0,s.jsx)(n.code,{children:"libqiskit.dylib"})," on MacOS.\n(Note that this step currently emits a lot of warnings, which is expected, and is no cause for alarm. Future versions will remove the warnings.)"]}),"\n",(0,s.jsx)(n.p,{children:"You can then compile a C program using the Qiskit C header and library:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcc example.c -o example.o -I /path/to/dist/c/include -L /path/to/dist/c/lib -lqiskit\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To ensure the Qiskit library is found during linking, set the runtime library path to\ninclude ",(0,s.jsx)(n.code,{children:"/path/to/dist/c/lib"}),". If the Python library is not available per default during dynamic linking,\nthis also needs to be added. These commands depend on the platform. On Linux:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export LD_LIBRARY_PATH=/path/to/dist/c/lib:$LD_LIBRARY_PATH\n# on Linux, the Python library is typically included in the dynamic library path per default\nexport LD_LIBRARY_PATH=/path/to/python/lib:$LD_LIBRARY_PATH\n"})}),"\n",(0,s.jsx)(n.p,{children:"On MacOS:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export DYLD_LIBRARY_PATH=/path/to/dist/c/lib:$DYLD_LIBRARY_PATH\nexport DYLD_LIBRARY_PATH=/path/to/python/lib:$DYLD_LIBRARY_PATH\n"})}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, you can set the runtime library path during compilation by adding"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"-Wl,-rpath,/path/to/dist/c/lib\n# same for Python\n"})}),"\n",(0,s.jsx)(n.p,{children:"to the compiler flags.\nIn addition, the Python library needs to be available during dynamic linking. In Linux environments\nthis is typically the default."}),"\n",(0,s.jsx)(n.p,{children:"Now you can execute the binary:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"./example.o\n"})}),"\n",(0,s.jsx)(n.p,{children:"which, if using the example snippet shown previously, should print"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"num_qubits: 100\nnum_terms: 1\nobservable: SparseObservable { num_qubits: 100, coeffs: [Complex { re: 2.0, im: 0.0 }], bit_terms: [X, Y, Z], indices: [0, 1, 2], boundaries: [0, 3] }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"windows",children:"Windows"}),"\n",(0,s.jsx)(n.p,{children:"This section provides build instructions for Windows systems."}),"\n",(0,s.jsx)(n.h3,{id:"requirements-1",children:"Requirements"}),"\n",(0,s.jsx)(n.p,{children:"Compilation requires the following tools:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A Rust compiler: see for example the ",(0,s.jsx)(n.a,{href:"https://github.com/Qiskit/qiskit/blob/main/CONTRIBUTING.md#installing-qiskit-from-source",children:"guide on installing Qiskit from source"})]}),"\n",(0,s.jsxs)(n.li,{children:["A C compiler: for example, MSVC and the native command prompt offering the ",(0,s.jsx)(n.code,{children:"cl"})," command"]}),"\n",(0,s.jsxs)(n.li,{children:["A Python installation, with access to both ",(0,s.jsx)(n.code,{children:"python3.lib"})," and ",(0,s.jsx)(n.code,{children:"python3.dll"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/mozilla/cbindgen",children:(0,s.jsx)(n.code,{children:"cbindgen"})}),": a tool to create the C header, which you can install with ",(0,s.jsx)(n.code,{children:"cargo install cbindgen"}),"\nNote that running the tool from the command line should be enabled, which might require updating your ",(0,s.jsx)(n.code,{children:"PATH"})," variable to include the cargo path."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"build-1",children:"Build"}),"\n",(0,s.jsxs)(n.p,{children:["First, compile the ",(0,s.jsx)(n.code,{children:"qiskit_cext"})," dynamic library, by running the following in Qiskit root"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'set PATH="\\path\\to\\pythonlib";%PATH%\ncargo rustc --release --crate-type cdylib -p qiskit-cext\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This will generate the ",(0,s.jsx)(n.code,{children:".dll"})," dynamic library and associated ",(0,s.jsx)(n.code,{children:".dll.lib"})," file in ",(0,s.jsx)(n.code,{children:"target/release"}),".\nNext, generate the header with"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cbindgen --crate qiskit-cext --output dist\\c\\include\\qiskit.h\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will write the MSVC-compatible header in ",(0,s.jsx)(n.code,{children:"dist\\c\\include"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Now you can use ",(0,s.jsx)(n.code,{children:"cl"})," to compile the C program. To ensure the compiler finds the qiskit library,\nwe include ",(0,s.jsx)(n.code,{children:"target\\release"})," in the ",(0,s.jsx)(n.code,{children:"PATH"})," variable."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'set PATH="\\path\\to\\target\\release";%PATH%\ncl example.c qiskit_cext.dll.lib -I\\path\\to\\dist\\c\\include\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Before running, you have to include the path to your ",(0,s.jsx)(n.code,{children:"python3.dll"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'set PATH="\\path\\to\\python3-dll";%PATH%\n.\\example.exe\n'})}),"\n",(0,s.jsx)(n.p,{children:"should then print"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"num_qubits: 100\nnum_terms: 1\nobservable: SparseObservable { num_qubits: 100, coeffs: [Complex { re: 2.0, im: 0.0 }], bit_terms: [X, Y, Z], indices: [0, 1, 2], boundaries: [0, 3] }\n"})}),"\n","\n",(0,s.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,s.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{id:"user-content-fn-1",children:["\n",(0,s.jsxs)(n.p,{children:["If you did not install Make, check the ",(0,s.jsx)(n.code,{children:"Makefile"})," in Qiskit root for the required commands - or simply install Make; it's not too late.) ",(0,s.jsx)(n.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453(e,n,i){i.d(n,{R:()=>r,x:()=>o});var t=i(96540);const s={},l=t.createContext(s);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);