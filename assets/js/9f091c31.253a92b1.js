"use strict";(globalThis.webpackChunkdoqumentation=globalThis.webpackChunkdoqumentation||[]).push([[9431],{79670(e,n,s){s.r(n),s.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/execution-modes-rest-api","title":"Execution modes using REST API","description":"How to run a quantum computing job in a Qiskit Runtime session.","source":"@site/i18n/tl/docusaurus-plugin-content-docs/current/guides/execution-modes-rest-api.mdx","sourceDirName":"guides","slug":"/guides/execution-modes-rest-api","permalink":"/guides/execution-modes-rest-api","draft":false,"unlisted":false,"editUrl":"https://github.com/JanLahmann/doQumentation/tree/main/docs/guides/execution-modes-rest-api.mdx","tags":[],"version":"current","frontMatter":{"title":"Execution modes using REST API","sidebar_label":"Execution modes using REST API","description":"How to run a quantum computing job in a Qiskit Runtime session.","notebook_path":"docs/guides/execution-modes-rest-api.ipynb"},"sidebar":"tutorialsSidebar","previous":{"title":"Run jobs in a session","permalink":"/guides/run-jobs-session"},"next":{"title":"Execution modes FAQs","permalink":"/guides/execution-modes-faq"}}');var t=s(74848),a=s(28453),o=s(11470),r=s(19365);const l={title:"Execution modes using REST API",sidebar_label:"Execution modes using REST API",description:"How to run a quantum computing job in a Qiskit Runtime session.",notebook_path:"docs/guides/execution-modes-rest-api.ipynb"},c=void 0,u={},d=[{value:"Job mode with REST API",id:"job-mode-with-rest-api",level:2},{value:"Session mode with REST API",id:"session-mode-with-rest-api",level:2},{value:"Start a session",id:"start-a-session",level:3},{value:"Close a session",id:"close-a-session",level:3},{value:"Batch mode with REST API",id:"batch-mode-with-rest-api",level:2},{value:"Examples of jobs submitted in a session",id:"examples-of-jobs-submitted-in-a-session",level:2},{value:"Estimator jobs in session mode",id:"estimator-jobs-in-session-mode",level:3},{value:"Sampler jobs in session mode",id:"sampler-jobs-in-session-mode",level:3},{value:"Next steps",id:"next-steps",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Admonition:s,OpenInLabBanner:i}=n;return s||h("Admonition",!0),i||h("OpenInLabBanner",!0),(0,t.jsxs)(t.Fragment,{children:["\n",(0,t.jsx)(n.admonition,{title:"Hindi pa naisalin",type:"note",children:(0,t.jsx)(n.p,{children:"Ang pahinang ito ay hindi pa naisalin. Nakikita mo ang orihinal na bersyon sa Ingles."})}),"\n",(0,t.jsx)(i,{notebookPath:"docs/guides/execution-modes-rest-api.ipynb"}),"\n","\n",(0,t.jsx)(n.p,{children:"You can run your Qiskit primitive workloads using REST APIs in one of three execution modes, depending on your needs: job, session, and batch. This topic explains these modes."}),"\n",(0,t.jsx)(s,{type:"note",children:(0,t.jsxs)(n.p,{children:["This documentation utilizes the Python ",(0,t.jsx)(n.code,{children:"requests"})," module to demonstrate the Qiskit Runtime REST API. However, this workflow can be executed using any language or framework that supports working with REST APIs. Refer to the ",(0,t.jsx)(n.a,{href:"https://docs.quantum.ibm.com/api/qiskit-ibm-runtime/tags/jobs",children:"API reference documentation"})," for details."]})}),"\n",(0,t.jsx)(n.h2,{id:"job-mode-with-rest-api",children:"Job mode with REST API"}),"\n",(0,t.jsxs)(n.p,{children:["In job mode, a single primitive request of the Estimator or the Sampler is made without a context manager. See how to run a quantum circuit using ",(0,t.jsx)(n.a,{href:"primitives-rest-api#estimator-primitive-with-rest-api",children:"Estimator"})," and ",(0,t.jsx)(n.a,{href:"primitives-rest-api#sampler-primitive-with-rest-api",children:"Sampler"})," for some examples."]}),"\n",(0,t.jsx)(n.h2,{id:"session-mode-with-rest-api",children:"Session mode with REST API"}),"\n",(0,t.jsxs)(n.p,{children:["A session is a Qiskit Runtime feature that lets you efficiently run multi-job iterative workloads on quantum computers. Using sessions helps avoid delays caused by queuing each job separately, which can be particularly useful for iterative tasks that require frequent communication between classical and quantum resources. More details about Sessions can be found in the ",(0,t.jsx)(n.a,{href:"./execution-modes",children:"documentation"}),"."]}),"\n",(0,t.jsx)(s,{type:"note",children:(0,t.jsx)(n.p,{children:"Open Plan users cannot submit session jobs."})}),"\n",(0,t.jsx)(n.h3,{id:"start-a-session",children:"Start a session"}),"\n",(0,t.jsx)(n.p,{children:"Begin by creating a session and obtaining a session ID."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import json\nimport requests\n\nsessionsUrl = "https://quantum.cloud.ibm.com/api/v1/sessions"\nauth_id = "Bearer <YOUR_BEARER_TOKEN>"\nbackend = "<BACKEND_NAME>"\ncrn = "<SERVICE-CRN>"\n\nheadersList = {\n  "Accept": "application/json",\n  "Content-Type": "application/json",\n  "Authorization": auth_id,\n  "Service-CRN": crn\n}\n\npayload = json.dumps({\n  "backend": backend,\n  "mode": \'dedicated\',\n})\n\nresponse = requests.request("POST", sessionsUrl, data=payload,  headers=headersList)\n\nsessionId = response.json()[\'id\']\n\nprint(response.json())\n'})}),"\n",(0,t.jsx)(n.p,{children:"Output"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"{'id': 'crw9s7cdbt40008jxesg'}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"close-a-session",children:"Close a session"}),"\n",(0,t.jsxs)(n.p,{children:["It is good practice to close a ",(0,t.jsx)(n.code,{children:"Session"})," when all jobs are done. This will reduce wait time for subsequent users."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'closureURL="https://quantum.cloud.ibm.com/api/v1/sessions/"+sessionId+"/close"\n\nheadersList = {\n  "Accept": "application/json",\n  "Authorization": auth_id,\n  "Service-CRN": crn\n}\n\nclosure_response = requests.request(\n    "DELETE",\n    closureURL,\n    headers=headersList\n    )\n\nprint("Session closure response ok?:",closure_response.ok,closure_response.text)\n'})}),"\n",(0,t.jsx)(n.p,{children:"Output"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"Session closure response ok?: True\n"})}),"\n",(0,t.jsx)(n.h2,{id:"batch-mode-with-rest-api",children:"Batch mode with REST API"}),"\n",(0,t.jsxs)(n.p,{children:["Alternatively, you can submit a batch job by specifying the ",(0,t.jsx)(n.code,{children:"mode"})," in the request payload. Batch mode can help shorten processing time if all jobs can be provided at the outset. Learn about batch mode in the ",(0,t.jsx)(n.a,{href:"./execution-modes#batch-mode",children:"introduction to execution modes"})," guide."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import json\nimport requests\n\nsessionsUrl = "https://quantum.cloud.ibm.com/api/v1/sessions"\n\nheadersList = {\n  "Accept": "application/json",\n  "Authorization": auth_id,\n  "Service-CRN": crn,\n  \'Content-Type\': \'application/json\'\n}\n\npayload = json.dumps({\n  "backend": backend,\n  "instance": "hub1/group1/project1",\n  "mode": "batch"\n})\n\nresponse = requests.request("POST", sessionsUrl, data=payload,  headers=headersList)\n\nsessionId = response.json()[\'id\']\n'})}),"\n",(0,t.jsx)(n.h2,{id:"examples-of-jobs-submitted-in-a-session",children:"Examples of jobs submitted in a session"}),"\n",(0,t.jsx)(n.p,{children:"Once a session is set up, one or more Sampler or Estimator jobs can be submitted to the same session by specifying the session ID."}),"\n",(0,t.jsx)(s,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"<parameter values>"})," in a ",(0,t.jsx)(n.code,{children:"PUB"})," can either be a single parameter or a list of parameters. It also supports ",(0,t.jsx)(n.code,{children:"numpy"})," broadcasting."]})}),"\n",(0,t.jsx)(n.h3,{id:"estimator-jobs-in-session-mode",children:"Estimator jobs in session mode"}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(r.A,{value:"1 circuit, 4 observables",label:"1 circuit, 4 observables",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'job_input = {\n\'program_id\': \'estimator\',\n"backend": backend,\n"session_id": sessionId, # This specifies the previously created Session\n"params": {\n    "pubs": [[resulting_qasm, [obs1, obs2, obs3, obs4]]], #primitive unified blocs (PUBs) containing one circuit each.\n    "options":{\n            "transpilation":{"optimization_level": 1},\n            "twirling": {"enable_gates": True,"enable_measure": True},\n            # "dynamical_decoupling": {"enable": True, "sequence_type": "XpXm"},   #(optional)\n                },\n}\n\n}\n'})})}),(0,t.jsx)(r.A,{value:"1 circuit, 4 observables, 2 parameter sets",label:"1 circuit, 4 observables, 2 parameter sets",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'job_input = {\n\'program_id\': \'estimator\',\n"backend": backend,\n"session_id": sessionId, # This specifies the previously created Session\n"params": {\n    "pubs": [[resulting_qasm, [[obs1], [obs2], [obs3], [obs4]], [[vals1], [vals2]]]], #primitive unified blocs (PUBs) containing one circuit each\n    "options":{\n            "transpilation":{"optimization_level": 1},\n            "twirling": {"enable_gates": True,"enable_measure": True},\n            # "dynamical_decoupling": {"enable": True, "sequence_type": "XpXm"},   #(optional)\n                },\n}\n}\n'})})}),(0,t.jsx)(r.A,{value:"2 circuits, 2 observables",label:"2 circuits, 2 observables",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'  job_input = {\n  \'program_id\': \'estimator\',\n  "backend": backend,\n  "session_id": sessionId, # This specifies the previously created Session\n  "params": {\n      "pubs": [[resulting_qasm, obs1],[resulting_qasm, obs2]], #primitive unified blocs (PUBs) containing one circuit each\n      "options":{\n              "transpilation":{"optimization_level": 1},\n              "twirling": {"enable_gates": True,"enable_measure": True},\n              # "dynamical_decoupling": {"enable": True, "sequence_type": "XpXm"},   #(optional)\n                  },\n  }\n}\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"sampler-jobs-in-session-mode",children:"Sampler jobs in session mode"}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(r.A,{value:"1 circuit, no parameters",label:"1 circuit, no parameters",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'job_input = {\n\'program_id\': \'sampler\',\n"backend": backend,\n"session_id": sessionId, # This specifies the previously created Session\n"params": {\n    "pubs": [[resulting_qasm]], #primitive unified blocs (PUBs) containing one circuit each\n    "options":{\n            "transpilation":{"optimization_level": 1},\n            "twirling": {"enable_gates": True,"enable_measure": True},\n            # "dynamical_decoupling": {"enable": True, "sequence_type": "XpXm"},   #(optional)\n                },\n}\n\n}\n'})})}),(0,t.jsx)(r.A,{value:"1 circuit, 3 parameter sets",label:"1 circuit, 3 parameter sets",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'job_input = {\n\'program_id\': \'sampler\',\n"backend": backend,\n"session_id": sessionId, # This specifies the previously created Session\n"params": {\n    "pubs": [[resulting_qasm, [vals1, vals2, vals3]]], #primitive unified blocs (PUBs) containing one circuit each\n    "options":{\n            "transpilation":{"optimization_level": 1},\n            "twirling": {"enable_gates": True,"enable_measure": True},\n            # "dynamical_decoupling": {"enable": True, "sequence_type": "XpXm"},   #(optional)\n                },\n}\n}\n'})})}),(0,t.jsx)(r.A,{value:"2 circuits, 1 parameter set",label:"2 circuits, 1 parameter set",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'  job_input = {\n  \'program_id\': \'sampler\',\n  "backend": backend,\n  "session_id": sessionId, # This specifies the previously created Session\n  "params": {\n      "pubs": [[resulting_qasm, [val1]],[resulting_qasm,None,100]], #primitive unified blocs (PUBs) containing one circuit each\n      "options":{\n              "transpilation":{"optimization_level": 1},\n              "twirling": {"enable_gates": True,"enable_measure": True},\n              # "dynamical_decoupling": {"enable": True, "sequence_type": "XpXm"},   #(optional)\n                  },\n  }\n}\n'})})})]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,t.jsx)(s,{type:"tip",title:"Recommendations",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Review detailed ",(0,t.jsx)(n.a,{href:"primitives-rest-api",children:"Sampler and Estimator"})," primitives examples using REST API."]}),"\n",(0,t.jsxs)(n.li,{children:["Read ",(0,t.jsx)(n.a,{href:"/guides/v2-primitives",children:"Migrate to V2 primitives"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Practice with primitives by working through the ",(0,t.jsx)(n.a,{href:"/learning/courses/variational-algorithm-design/cost-functions",children:"Cost function lesson"})," in IBM Quantum\xae Learning."]}),"\n",(0,t.jsxs)(n.li,{children:["Learn how to transpile locally in the ",(0,t.jsx)(n.a,{href:"./transpile",children:"Transpile"})," section."]}),"\n"]})})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},19365(e,n,s){s.d(n,{A:()=>o});s(96540);var i=s(34164);const t="tabItem_Ymn6";var a=s(74848);function o({children:e,hidden:n,className:s}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,i.A)(t,s),hidden:n,children:e})}},11470(e,n,s){s.d(n,{A:()=>T});var i=s(96540),t=s(34164),a=s(17559),o=s(23104),r=s(56347),l=s(205),c=s(57485),u=s(31682),d=s(70679);function p(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:n,children:s}=e;return(0,i.useMemo)(()=>{const e=n??function(e){return p(e).map(({props:{value:e,label:n,attributes:s,default:i}})=>({value:e,label:n,attributes:s,default:i}))}(s);return function(e){const n=(0,u.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}function b({queryString:e=!1,groupId:n}){const s=(0,r.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(t),(0,i.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(s.location.search);n.set(t,e),s.replace({...s.location,search:n.toString()})},[t,s])]}function g(e){const{defaultValue:n,queryString:s=!1,groupId:t}=e,a=m(e),[o,r]=(0,i.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find(e=>e.default)??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:a})),[c,u]=b({queryString:s,groupId:t}),[p,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,t]=(0,d.Dv)(n);return[s,(0,i.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),j=(()=>{const e=c??p;return h({value:e,tabValues:a})?e:null})();(0,l.A)(()=>{j&&r(j)},[j]);return{selectedValue:o,selectValue:(0,i.useCallback)(e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);r(e),u(e),g(e)},[u,g,a]),tabValues:a}}var j=s(92303);const x="tabList__CuJ",v="tabItem_LNqP";var f=s(74848);function y({className:e,block:n,selectedValue:s,selectValue:i,tabValues:a}){const r=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=e=>{const n=e.currentTarget,t=r.indexOf(n),o=a[t].value;o!==s&&(l(n),i(o))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const s=r.indexOf(e.currentTarget)+1;n=r[s]??r[0];break}case"ArrowLeft":{const s=r.indexOf(e.currentTarget)-1;n=r[s]??r[r.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:i})=>(0,f.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{r.push(e)},onKeyDown:u,onClick:c,...i,className:(0,t.A)("tabs__item",v,i?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function _({lazy:e,children:n,selectedValue:s}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===s);return e?(0,i.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function w(e){const n=g(e);return(0,f.jsxs)("div",{className:(0,t.A)(a.G.tabs.container,"tabs-container",x),children:[(0,f.jsx)(y,{...n,...e}),(0,f.jsx)(_,{...n,...e})]})}function T(e){const n=(0,j.A)();return(0,f.jsx)(w,{...e,children:p(e.children)},String(n))}},28453(e,n,s){s.d(n,{R:()=>o,x:()=>r});var i=s(96540);const t={},a=i.createContext(t);function o(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);