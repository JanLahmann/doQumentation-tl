"use strict";(globalThis.webpackChunkdoqumentation=globalThis.webpackChunkdoqumentation||[]).push([[1021],{20771(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>u,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/primitives-rest-api","title":"Primitives with REST API","description":"How to use the Sampler and Estimator primitives with Qiskit Runtime REST API.","source":"@site/i18n/tl/docusaurus-plugin-content-docs/current/guides/primitives-rest-api.mdx","sourceDirName":"guides","slug":"/guides/primitives-rest-api","permalink":"/guides/primitives-rest-api","draft":false,"unlisted":false,"editUrl":"https://github.com/JanLahmann/doQumentation/tree/main/docs/guides/primitives-rest-api.mdx","tags":[],"version":"current","frontMatter":{"title":"Primitives with REST API","sidebar_label":"Primitives with REST API","description":"How to use the Sampler and Estimator primitives with Qiskit Runtime REST API.","notebook_path":"docs/guides/primitives-rest-api.ipynb"},"sidebar":"tutorialsSidebar","previous":{"title":"Primitives examples","permalink":"/guides/primitives-examples"},"next":{"title":"Noise learning helper","permalink":"/guides/noise-learning"}}');var s=t(74848),r=t(28453),a=t(11470),o=t(19365);const c={title:"Primitives with REST API",sidebar_label:"Primitives with REST API",description:"How to use the Sampler and Estimator primitives with Qiskit Runtime REST API.",notebook_path:"docs/guides/primitives-rest-api.ipynb"},u=void 0,l={},d=[{value:"Estimator primitive with REST API",id:"estimator-primitive-with-rest-api",level:2},{value:"1. Initialize the account",id:"1-initialize-the-account",level:3},{value:"2. Create a QASM circuit",id:"2-create-a-qasm-circuit",level:3},{value:"3. Run the quantum circuit using the Estimator V2 API",id:"3-run-the-quantum-circuit-using-the-estimator-v2-api",level:3},{value:"4. Check job status and get results",id:"4-check-job-status-and-get-results",level:3},{value:"5. Work with Runtime options",id:"5-work-with-runtime-options",level:3},{value:"Sampler primitive with REST API",id:"sampler-primitive-with-rest-api",level:2},{value:"1. Initialize the account",id:"1-initialize-the-account-1",level:3},{value:"2. Create a QASM circuit",id:"2-create-a-qasm-circuit-1",level:3},{value:"3. Run the quantum circuit using Sampler V2 API",id:"3-run-the-quantum-circuit-using-sampler-v2-api",level:3},{value:"4. Check job status and get results",id:"4-check-job-status-and-get-results-1",level:3},{value:"5. Work with Runtime options",id:"5-work-with-runtime-options-1",level:3},{value:"Sampler primitive with REST API and parameterized circuits",id:"sampler-primitive-with-rest-api-and-parameterized-circuits",level:2},{value:"1. Initialize the account",id:"1-initialize-the-account-2",level:3},{value:"2. Define parameters",id:"2-define-parameters",level:3},{value:"3. Create a quantum circuit and add parameterized gates",id:"3-create-a-quantum-circuit-and-add-parameterized-gates",level:3},{value:"4. Generate QASM 3 code",id:"4-generate-qasm-3-code",level:3},{value:"5. Run the quantum circuit using Sampler V2 API",id:"5-run-the-quantum-circuit-using-sampler-v2-api",level:3},{value:"6. Check job status and get results",id:"6-check-job-status-and-get-results",level:3},{value:"Next steps",id:"next-steps",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Admonition:t,OpenInLabBanner:i}=n;return t||m("Admonition",!0),i||m("OpenInLabBanner",!0),(0,s.jsxs)(s.Fragment,{children:["\n",(0,s.jsx)(n.admonition,{title:"Hindi pa naisalin",type:"note",children:(0,s.jsx)(n.p,{children:"Ang pahinang ito ay hindi pa naisalin. Nakikita mo ang orihinal na bersyon sa Ingles."})}),"\n",(0,s.jsx)(i,{notebookPath:"docs/guides/primitives-rest-api.ipynb"}),"\n","\n","\n",(0,s.jsx)(n.p,{children:"The steps in this topic describe how to run and configure primitive workloads with REST API, and demonstrate how to invoke them in any program of your choice."}),"\n",(0,s.jsx)(t,{type:"note",children:(0,s.jsxs)(n.p,{children:["This documentation utilizes the Python ",(0,s.jsx)(n.code,{children:"requests"})," module to demonstrate the Qiskit Runtime REST API. However, this workflow can be executed using any language or framework that supports working with REST APIs. Refer to the ",(0,s.jsx)(n.a,{href:"https://docs.quantum.ibm.com/api/qiskit-ibm-runtime/tags/jobs",children:"API reference documentation"})," for details."]})}),"\n",(0,s.jsx)("span",{id:"start-estimator"}),"\n",(0,s.jsx)(n.h2,{id:"estimator-primitive-with-rest-api",children:"Estimator primitive with REST API"}),"\n",(0,s.jsx)(n.h3,{id:"1-initialize-the-account",children:"1. Initialize the account"}),"\n",(0,s.jsx)(n.p,{children:"Because Qiskit Runtime Estimator is a managed service, you first need to initialize your account. You can then select the device you want to use to calculate the expectation value."}),"\n",(0,s.jsxs)(n.p,{children:["Find details on how to initialize your account, view available backends, and invalidate tokens in this ",(0,s.jsx)(n.a,{href:"/guides/cloud-setup-rest-api",children:"topic"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"2-create-a-qasm-circuit",children:"2. Create a QASM circuit"}),"\n",(0,s.jsx)(n.p,{children:"You need at least one circuit as the input to the Estimator primitive."}),"\n",(0,s.jsx)(n.p,{children:"Define a QASM quantum circuit. For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"qasm_string='''\nOPENQASM 3;\ninclude \"stdgates.inc\";\nqreg q[2];\ncreg c[2];\nx q[0];\ncx q[0], q[1];\nc[0] = measure q[0];\nc[1] = measure q[1];\n'''\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The following code snippets assume that the ",(0,s.jsx)(n.code,{children:"qasm_string"})," has been transpiled to a new string ",(0,s.jsx)(n.code,{children:"resulting_qasm"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"3-run-the-quantum-circuit-using-the-estimator-v2-api",children:"3. Run the quantum circuit using the Estimator V2 API"}),"\n",(0,s.jsx)(t,{type:"note",children:(0,s.jsxs)(n.p,{children:["The following jobs use ",(0,s.jsx)(n.a,{href:"/guides/v2-primitives",children:"Qiskit Runtime V2 primitives"}),". Both ",(0,s.jsx)(n.code,{children:"SamplerV2"})," and ",(0,s.jsx)(n.code,{children:"EstimatorV2"})," take one or more primitive unified blocs (PUBs) as the input. Each PUB is a tuple that contains one circuit and the data broadcasted to that circuit, which can be multiple observables and parameters. Each PUB returns a result."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nurl = \'https://quantum.cloud.ibm.com/api/v1/jobs\'\nauth_id = "Bearer <YOUR_BEARER_TOKEN>"\ncrn = "<SERVICE-CRN>"\nbackend = "<BACKEND_NAME>"\n\nheaders = {\n    \'Content-Type\': \'application/json\',\n    \'Authorization\':auth_id,\n    \'Service-CRN\': crn\n    }\n\njob_input = {\n    \'program_id\': \'estimator\',\n    "backend": backend,\n    "params": {\n        "pubs": [ #primitive unified blocs (PUBs) containing one circuit each.\n            [resulting_qasm, # QASM circuit\n             {"IIZII": 1, "XIZZZ": 2.3}, # Observable\n             None # parameter values\n             ]]\n}}\n\nresponse = requests.post(url, headers=headers, json=job_input)\n\nif response.status_code == 200:\n    job_id = response.json().get(\'id\')\n    print("Job created:",response.text)\nelse:\n    print(f"Error: {response.status_code}")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"4-check-job-status-and-get-results",children:"4. Check job status and get results"}),"\n",(0,s.jsxs)(n.p,{children:["Next, pass the ",(0,s.jsx)(n.code,{children:"job_id"})," to the API:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"response_status_singlejob= requests.get(url+'/'+job_id, headers=headers)\nresponse_status_singlejob.json().get('state')\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:">>> Job ID: 58223448-5100-4dec-a47a-942fb30edcad\n>>> Job Status: JobStatus.RUNNING\n"})}),"\n",(0,s.jsx)(n.p,{children:"Get job results:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"response_result= requests.get(url+'/'+job_id+'/results', headers=headers)\n\nres_dict=response_result.json()\n\nestimator_result=res_dict['results']\nprint(estimator_result)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"[{'data': {'evs': 0.7428980350102542, 'stds': 0.029884014518789213, 'ensemble_standard_error': 0.03261147170624149}, 'metadata': {'shots': 10016, 'target_precision': 0.01, 'circuit_metadata': {}, 'resilience': {}, 'num_randomizations': 32}}]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-work-with-runtime-options",children:"5. Work with Runtime options"}),"\n",(0,s.jsx)(n.p,{children:"Error mitigation techniques allow users to mitigate circuit errors by modeling the device noise at the time of execution. This typically results in quantum pre-processing overhead related to model training, and classical post-processing overhead to mitigate errors in the raw results by using the generated model."}),"\n",(0,s.jsxs)(n.p,{children:["The error mitigation techniques built in to primitives are advanced resilience options. To specify these options, use the ",(0,s.jsx)(n.code,{children:"resilience_level"})," option when submitting your job."]}),"\n",(0,s.jsxs)(n.p,{children:["The following examples demonstrate the default options for dynamical decoupling, twirling, and TREX + ZNE. Find more options and further details in the ",(0,s.jsx)(n.a,{href:"./error-mitigation-and-suppression-techniques",children:"Error mitigation and suppression techniques"})," topic."]}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(o.A,{value:"TREX + ZNE",label:"TREX + ZNE",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nurl = \'https://quantum.cloud.ibm.com/api/v1/jobs\'\nauth_id = "Bearer <YOUR_BEARER_TOKEN>"\ncrn = "<SERVICE-CRN>"\nbackend = "BACKEND_NAME"\n\nheaders = {\n  \'Content-Type\': \'application/json\',\n  \'Authorization\':auth_id,\n  \'Service-CRN\': crn\n  }\njob_input = {\n  \'program_id\': \'estimator\',\n  "backend": backend,\n  "params": {\n      "pubs": [ #primitive unified blocs (PUBs) containing one circuit each\n          [resulting_qasm, # QASM circuit\n           {"IIZII": 1, "XIZZZ": 2.3}, # Observable\n           None # parameter values\n           ]]\n      "options": {\n          "resilience": {\n            "measure_mitigation": True,\n            "zne_mitigation": True,\n            "zne": {\n                "extrapolator":["exponential", "linear"],\n                "noise_factors":[1, 3, 5],\n            },\n        },\n      },\n  }\n}\n\nresponse = requests.post(url, headers=headers, json=job_input)\n\nif response.status_code == 200:\n  job_id = response.json().get(\'id\')\n  print("Job created:",response.text)\nelse:\n  print(f"Error: {response.status_code}")\n'})})}),(0,s.jsx)(o.A,{value:"Dynamical Decoupling",label:"Dynamical Decoupling",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nurl = \'https://quantum.cloud.ibm.com/api/v1/jobs\'\nauth_id = "Bearer <YOUR_BEARER_TOKEN>"\ncrn = "<SERVICE-CRN>"\nbackend = "BACKEND_NAME"\n\nheaders = {\n  \'Content-Type\': \'application/json\',\n  \'Authorization\':auth_id,\n  \'Service-CRN\': crn\n  }\njob_input = {\n  \'program_id\': \'estimator\',\n  "backend": backend,\n  "params": {\n      "pubs": [ #primitive unified blocs (PUBs) containing one circuit each\n          [resulting_qasm, # QASM circuit\n           {"IIZII": 1, "XIZZZ": 2.3}, # Observable\n           None # parameter values\n           ]]\n      "options": {\n          "dynamical_decoupling": {\n              "enable": True,\n              "sequence_type": \'XpXm\',\n              "extra_slack_distribution": \'middle\',\n              "scheduling_method": \'alap\',\n          },\n      },\n  }\n}\n\nresponse = requests.post(url, headers=headers, json=job_input)\n\nif response.status_code == 200:\n  job_id = response.json().get(\'id\')\n  print("Job created:",response.text)\nelse:\n  print(f"Error: {response.status_code}")\n'})})}),(0,s.jsx)(o.A,{value:"Twirling",label:"Twirling",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nurl = \'https://quantum.cloud.ibm.com/api/v1/jobs\'\nauth_id = "Bearer <YOUR_BEARER_TOKEN>"\ncrn = "<SERVICE-CRN>"\nbackend = "BACKEND_NAME"\n\nheaders = {\n  \'Content-Type\': \'application/json\',\n  \'Authorization\':auth_id,\n  \'Service-CRN\': crn\n  }\njob_input = {\n  \'program_id\': \'estimator\',\n  "backend": backend,\n  "params": {\n      "pubs": [ #primitive unified blocs (PUBs) containing one circuit each\n          [resulting_qasm, # QASM circuit\n           {"IIZII": 1, "XIZZZ": 2.3}, # Observable\n           None # parameter values\n           ]]\n      "options": {\n          "twirling": {\n              "enable_gates": True,\n              "enable_measure": True,\n              "num_randomizations": "auto",\n              "shots_per_randomization": "auto",\n              "strategy": "active-accum",\n              },\n      },\n  }\n}\n\nresponse = requests.post(url, headers=headers, json=job_input)\n\nif response.status_code == 200:\n  job_id = response.json().get(\'id\')\n  print("Job created:",response.text)\nelse:\n  print(f"Error: {response.status_code}")\n'})})})]}),"\n",(0,s.jsx)("span",{id:"start-sampler"}),"\n",(0,s.jsx)(n.h2,{id:"sampler-primitive-with-rest-api",children:"Sampler primitive with REST API"}),"\n",(0,s.jsx)(n.h3,{id:"1-initialize-the-account-1",children:"1. Initialize the account"}),"\n",(0,s.jsx)(n.p,{children:"Because Qiskit Runtime Sampler is a managed service, you first need to initialize your account. You can then select the device you want to use to run your calculations on."}),"\n",(0,s.jsxs)(n.p,{children:["Find details on how to initialize your account, view available backends, and invalidate tokens in this ",(0,s.jsx)(n.a,{href:"/guides/cloud-setup-rest-api",children:"topic"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"2-create-a-qasm-circuit-1",children:"2. Create a QASM circuit"}),"\n",(0,s.jsx)(n.p,{children:"You need at least one circuit as the input to the Sampler primitive."}),"\n",(0,s.jsx)(n.p,{children:"Define a QASM quantum circuit:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"qasm_string='''\nOPENQASM 3;\ninclude \"stdgates.inc\";\nqreg q[2];\ncreg c[2];\nx q[0];\ncx q[0], q[1];\nc[0] = measure q[0];\nc[1] = measure q[1];\n'''\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The code snippets given below assume that the ",(0,s.jsx)(n.code,{children:"qasm_string"})," has been transpiled to a new string ",(0,s.jsx)(n.code,{children:"resulting_qasm"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"3-run-the-quantum-circuit-using-sampler-v2-api",children:"3. Run the quantum circuit using Sampler V2 API"}),"\n",(0,s.jsx)(t,{type:"note",children:(0,s.jsxs)(n.p,{children:["The jobs below use ",(0,s.jsx)(n.a,{href:"/guides/v2-primitives",children:"Qiskit Runtime V2 primitives"}),". Both ",(0,s.jsx)(n.code,{children:"SamplerV2"})," and ",(0,s.jsx)(n.code,{children:"EstimatorV2"})," take one or more primitive unified blocs (PUBs) as the input. Each PUB is a tuple that contains one circuit and the data broadcasted to that circuit, which can be multiple observables and parameters. Each PUB returns a result."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import requests\n\nurl = 'https://quantum.cloud.ibm.com/api/v1/jobs'\nauth_id = \"Bearer <YOUR_BEARER_TOKEN>\"\ncrn = \"<SERVICE-CRN>\"\nbackend = \"<BACKEND_NAME>\"\n\nheaders = {\n    'Content-Type': 'application/json',\n    'Authorization':auth_id,\n    'Service-CRN': crn\n    }\njob_input = {\n    'program_id': 'sampler',\n    \"backend\": backend,\n    \"params\": {\n        \"pubs\": [[resulting_qasm],[resulting_qasm,None,500]] # primitive unified blocs (PUBs) containing one circuit each.\n}}\n\nresponse = requests.post(url, headers=headers, json=job_input)\n\nif response.status_code == 200:\n    job_id = response.json().get('id')\n    print(\"Job created:\",response.text)\nelse:\n    print(f\"Error: {response.status_code}\")\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-check-job-status-and-get-results-1",children:"4. Check job status and get results"}),"\n",(0,s.jsxs)(n.p,{children:["Next, pass the ",(0,s.jsx)(n.code,{children:"job_id"})," to the API:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"response_status_singlejob= requests.get(url+'/'+job_id, headers=headers)\nresponse_status_singlejob.json().get('state')\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:">>> Job ID: 58223448-5100-4dec-a47a-942fb30edced\n>>> Job Status: JobStatus.RUNNING\n"})}),"\n",(0,s.jsx)(n.p,{children:"Get job results:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"response_result= requests.get(url+'/'+job_id+'/results', headers=headers)\n\nres_dict=response_result.json()\n\n# Get results for the first PUB\ncounts=res_dict['results'][0]['data']['c']['samples']\n\nprint(counts[:20])\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"['0x3', '0x0', '0x2', '0x1', '0x0', '0x3', '0x0', '0x3', '0x1', '0x2', '0x2', '0x0', '0x2', '0x0', '0x3', '0x3', '0x2', '0x0', '0x1', '0x0']\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-work-with-runtime-options-1",children:"5. Work with Runtime options"}),"\n",(0,s.jsx)(n.p,{children:"Error mitigation techniques allow users to mitigate circuit errors by modeling the device noise at the time of execution. This typically results in quantum pre-processing overhead related to model training, and classical post-processing overhead to mitigate errors in the raw results by using the generated model."}),"\n",(0,s.jsxs)(n.p,{children:["The error mitigation techniques built in to primitives are advanced resilience options. To specify these options, use the ",(0,s.jsx)(n.code,{children:"resilience_level"})," option when submitting your job.\nSampler V2 does not support specifying resilience levels. However, you can turn on or off individual error mitigation / suppression methods."]}),"\n",(0,s.jsxs)(n.p,{children:["The following examples demonstrate the default options for dynamical decoupling and twirling. Find more options and further details in the ",(0,s.jsx)(n.a,{href:"./error-mitigation-and-suppression-techniques",children:"Error mitigation and suppression techniques"})," topic."]}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(o.A,{value:"Dynamical Decoupling",label:"Dynamical Decoupling",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nurl = \'https://quantum.cloud.ibm.com/api/v1/jobs\'\nauth_id = "Bearer <YOUR_BEARER_TOKEN>"\ncrn = "<SERVICE-CRN>"\nbackend = "<BACKEND_NAME>"\n\nheaders = {\n  \'Content-Type\': \'application/json\',\n  \'Authorization\':auth_id,\n  \'Service-CRN\': crn\n  }\njob_input = {\n  \'program_id\': \'sampler\',\n  "backend": backend,\n  "params": {\n      "pubs": [[resulting_qasm]], # primitive unified blocs (PUBs) containing one circuit each.\n      "options": {\n          "dynamical_decoupling": {\n              "enable": True,\n              "sequence_type": \'XpXm\',\n              "extra_slack_distribution": \'middle\',\n              "scheduling_method": \'alap\',\n          },\n      },\n  }\n}\n\nresponse = requests.post(url, headers=headers, json=job_input)\n\nif response.status_code == 200:\n  job_id = response.json().get(\'id\')\n  print("Job created:",response.text)\nelse:\n  print(f"Error: {response.status_code}")\n'})})}),(0,s.jsx)(o.A,{value:"Twirling",label:"Twirling",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nurl = \'https://quantum.cloud.ibm.com/api/v1/jobs\'\nauth_id = "Bearer <YOUR_BEARER_TOKEN>"\ncrn = "<SERVICE-CRN>"\nbackend = "<BACKEND_NAME>"\n\nheaders = {\n  \'Content-Type\': \'application/json\',\n  \'Authorization\':auth_id,\n  \'Service-CRN\': crn\n  }\njob_input = {\n  \'program_id\': \'sampler\',\n  "backend": backend,\n  "params": {\n      "pubs": [[resulting_qasm]], # primitive unified blocs (PUBs) containing one circuit each.\n      "options": {\n          "twirling": {\n              "enable_gates": True,\n              "enable_measure": True,\n              "num_randomizations": "auto",\n              "shots_per_randomization": "auto",\n              "strategy": "active-accum",\n              },\n      },\n  }\n}\n\nresponse = requests.post(url, headers=headers, json=job_input)\n\nif response.status_code == 200:\n  job_id = response.json().get(\'id\')\n  print("Job created:",response.text)\nelse:\n  print(f"Error: {response.status_code}")\n'})})})]}),"\n",(0,s.jsx)("span",{id:"start-sampler-parms"}),"\n",(0,s.jsx)(n.h2,{id:"sampler-primitive-with-rest-api-and-parameterized-circuits",children:"Sampler primitive with REST API and parameterized circuits"}),"\n",(0,s.jsx)(n.h3,{id:"1-initialize-the-account-2",children:"1. Initialize the account"}),"\n",(0,s.jsx)(n.p,{children:"Because Qiskit Runtime is a managed service, you first need to initialize your account. You can then select the device you want to use to run your calculations on."}),"\n",(0,s.jsxs)(n.p,{children:["Find details on how to initialize your account, view available backends, and invalidate tokens in this ",(0,s.jsx)(n.a,{href:"/guides/cloud-setup-rest-api",children:"topic"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"2-define-parameters",children:"2. Define parameters"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import requests\nimport qiskit_ibm_runtime\nfrom qiskit_ibm_runtime import QiskitRuntimeService\nfrom qiskit.transpiler import generate_preset_pass_manager\nfrom qiskit.qasm3 import dumps\nfrom qiskit import QuantumCircuit\nfrom qiskit.circuit import Parameter\nfrom qiskit import transpile\n\nservice = QiskitRuntimeService(channel='ibm_quantum')\nbackend = service.backend(\"<SPECIFY BACKEND>\")\n\npm = generate_preset_pass_manager(backend=backend, optimization_level=1)\n\ntheta = Parameter('theta')\nphi = Parameter('phi')\nparameter_values = {'theta': 1.57, 'phi': 3.14}   # In case we want to pass a dictionary\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-create-a-quantum-circuit-and-add-parameterized-gates",children:"3. Create a quantum circuit and add parameterized gates"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"qc = QuantumCircuit(2)\n\n# Add parameterized gates\nqc.rx(theta, 0)\nqc.ry(phi, 1)\nqc.cx(0, 1)\nqc.measure_all()\n\n# Draw the original circuit\nqc.draw('mpl')\n\n# Get an ISA circuit\nisa_circuit = pm.run(qc)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-generate-qasm-3-code",children:"4. Generate QASM 3 code"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'qasm_str = dumps(isa_circuit)\nprint("Generated QASM 3 code:")\nprint(qasm_str)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"5-run-the-quantum-circuit-using-sampler-v2-api",children:"5. Run the quantum circuit using Sampler V2 API"}),"\n",(0,s.jsx)(t,{type:"note",children:(0,s.jsxs)(n.p,{children:["The following jobs use Qiskit Runtime V2 ",(0,s.jsx)(n.a,{href:"/guides/primitives",children:"primitives"}),". Both ",(0,s.jsx)(n.a,{href:"https://docs.quantum.ibm.com/api/qiskit-ibm-runtime/sampler-v2",children:(0,s.jsx)(n.code,{children:"SamplerV2"})})," and ",(0,s.jsx)(n.a,{href:"https://docs.quantum.ibm.com/api/qiskit-ibm-runtime/estimator-v2",children:(0,s.jsx)(n.code,{children:"EstimatorV2"})})," take one or more ",(0,s.jsx)(n.a,{href:"/guides/primitive-input-output#pubs",children:"primitive unified blocs (PUBs)"})," as the input. Each PUB is a tuple that contains one circuit and the data broadcasted to that circuit, which can be multiple observables and parameters. Each PUB returns a result."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nurl = \'https://quantum.cloud.ibm.com/api/v1/jobs\'\nauth_id = "Bearer <YOUR_BEARER_TOKEN>"\ncrn = "<SERVICE-CRN>"\nbackend = "<BACKEND_NAME>"\n\nheaders = {\n    \'Content-Type\': \'application/json\',\n    \'Authorization\':auth_id,\n    \'Service-CRN\': crn\n    }\n\njob_input = {\n    \'program_id\': \'sampler\',\n    "backend": backend,\n    "params": {\n        # Choose one option: direct parameter transfer or through a dictionary\n        #"pubs": [[qasm_str,[1,2],500]], # primitive unified blocs (PUBs) containing one circuit each.\n        "pubs": [[qasm_str,parameter_values,500]], # primitive unified blocs (PUBs) containing one circuit each.\n}}\n\nresponse = requests.post(url, headers=headers, json=job_input)\n\nif response.status_code == 200:\n    job_id = response.json().get(\'id\')\n    print(f"Job created: {response.text}")\nelse:\n    print(f"Error: {response.status_code}")\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"print(response.text)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-check-job-status-and-get-results",children:"6. Check job status and get results"}),"\n",(0,s.jsxs)(n.p,{children:["Next, pass the ",(0,s.jsx)(n.code,{children:"job_id"})," to the API:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"response_status_singlejob = requests.get(f\"{url}/{job_id}\", headers=headers)\nresponse_status_singlejob.json().get('state')\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"{'status': 'Completed'}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Get job results:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"response_result = requests.get(f\"{url}/{job_id}/results\", headers=headers)\n\nres_dict=response_result.json()\n\n# Get results for the first PUB\ncounts=res_dict['results'][0]['data']['c']['samples']\n\nprint(counts[:20])\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"['0x1', '0x2', '0x1', '0x2', '0x1', '0x2', '0x0', '0x2', '0x1', '0x1', '0x2', '0x2', '0x1', '0x1', '0x1', '0x1', '0x1', '0x1', '0x1', '0x1']\n"})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,s.jsx)(t,{type:"tip",title:"Recommendations",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["There are several ways to run workloads, depending on your needs: job mode, session mode, and batch mode. Learn how to work with session mode and batch mode in the ",(0,s.jsx)(n.a,{href:"/guides/execution-modes-rest-api",children:"execution modes topic"}),". Note that Open Plan users cannot submit session jobs."]}),"\n",(0,s.jsxs)(n.li,{children:["Learn how to ",(0,s.jsx)(n.a,{href:"/guides/cloud-setup-rest-api",children:"initialize your account"})," with REST API."]}),"\n",(0,s.jsxs)(n.li,{children:["Read ",(0,s.jsx)(n.a,{href:"/guides/v2-primitives",children:"Migrate to V2 primitives"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Practice with primitives by working through the ",(0,s.jsx)(n.a,{href:"/learning/courses/variational-algorithm-design/cost-functions",children:"Cost function lesson"})," in IBM Quantum Learning."]}),"\n",(0,s.jsxs)(n.li,{children:["Learn how to transpile locally in the ",(0,s.jsx)(n.a,{href:"./transpile",children:"Transpile"})," section."]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/guides/v2-primitives",children:"Migrate to the Qiskit Runtime V2 primitives."})}),"\n"]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}function m(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},19365(e,n,t){t.d(n,{A:()=>a});t(96540);var i=t(34164);const s="tabItem_Ymn6";var r=t(74848);function a({children:e,hidden:n,className:t}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)(s,t),hidden:n,children:e})}},11470(e,n,t){t.d(n,{A:()=>w});var i=t(96540),s=t(34164),r=t(17559),a=t(23104),o=t(56347),c=t(205),u=t(57485),l=t(31682),d=t(70679);function p(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,i.useMemo)(()=>{const e=n??function(e){return p(e).map(({props:{value:e,label:n,attributes:t,default:i}})=>({value:e,label:n,attributes:t,default:i}))}(t);return function(e){const n=(0,l.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function g({queryString:e=!1,groupId:n}){const t=(0,o.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,u.aZ)(s),(0,i.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})},[s,t])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,r=h(e),[a,o]=(0,i.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r})),[u,l]=g({queryString:t,groupId:s}),[p,b]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,d.Dv)(n);return[t,(0,i.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),j=(()=>{const e=u??p;return m({value:e,tabValues:r})?e:null})();(0,c.A)(()=>{j&&o(j)},[j]);return{selectedValue:a,selectValue:(0,i.useCallback)(e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),l(e),b(e)},[l,b,r]),tabValues:r}}var j=t(92303);const x="tabList__CuJ",v="tabItem_LNqP";var _=t(74848);function f({className:e,block:n,selectedValue:t,selectValue:i,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),u=e=>{const n=e.currentTarget,s=o.indexOf(n),a=r[s].value;a!==t&&(c(n),i(a))},l=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,_.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:r.map(({value:e,label:n,attributes:i})=>(0,_.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:l,onClick:u,...i,className:(0,s.A)("tabs__item",v,i?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function q({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===t);return e?(0,i.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,_.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function E(e){const n=b(e);return(0,_.jsxs)("div",{className:(0,s.A)(r.G.tabs.container,"tabs-container",x),children:[(0,_.jsx)(f,{...n,...e}),(0,_.jsx)(q,{...n,...e})]})}function w(e){const n=(0,j.A)();return(0,_.jsx)(E,{...e,children:p(e.children)},String(n))}},28453(e,n,t){t.d(n,{R:()=>a,x:()=>o});var i=t(96540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);