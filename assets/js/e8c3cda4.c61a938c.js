"use strict";(globalThis.webpackChunkdoqumentation=globalThis.webpackChunkdoqumentation||[]).push([[564],{74716(e,s,r){r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"guides/serverless-run-first-workload","title":"Run your first Qiskit Serverless workload remotely","description":"How to list programs available in Serverless, pass inputs into these programs, run them remotely, check status, and retrieve results and logs.","source":"@site/i18n/tl/docusaurus-plugin-content-docs/current/guides/serverless-run-first-workload.mdx","sourceDirName":"guides","slug":"/guides/serverless-run-first-workload","permalink":"/guides/serverless-run-first-workload","draft":false,"unlisted":false,"editUrl":"https://github.com/JanLahmann/doQumentation/tree/main/docs/guides/serverless-run-first-workload.mdx","tags":[],"version":"current","frontMatter":{"title":"Run your first Qiskit Serverless workload remotely","sidebar_label":"Run your first Qiskit Serverless workload remotely","description":"How to list programs available in Serverless, pass inputs into these programs, run them remotely, check status, and retrieve results and logs.","notebook_path":"docs/guides/serverless-run-first-workload.ipynb"},"sidebar":"tutorialsSidebar","previous":{"title":"Write your first Qiskit Serverless program","permalink":"/guides/serverless-first-program"},"next":{"title":"Manage Qiskit Serverless compute and data resources","permalink":"/guides/serverless-manage-resources"}}');var i=r(74848),t=r(28453);const o={title:"Run your first Qiskit Serverless workload remotely",sidebar_label:"Run your first Qiskit Serverless workload remotely",description:"How to list programs available in Serverless, pass inputs into these programs, run them remotely, check status, and retrieve results and logs.",notebook_path:"docs/guides/serverless-run-first-workload.ipynb"},a=void 0,l={},c=[{value:"List programs available",id:"list-programs-available",level:2},{value:"Run an uploaded program and pass inputs",id:"run-an-uploaded-program-and-pass-inputs",level:2},{value:"Check job status",id:"check-job-status",level:2},{value:"Retrieve logs and results",id:"retrieve-logs-and-results",level:2},{value:"List jobs previously run with Qiskit Serverless",id:"list-jobs-previously-run-with-qiskit-serverless",level:2},{value:"Next steps",id:"next-steps",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Admonition:n,Details:o,OpenInLabBanner:a}=s;return n||h("Admonition",!0),o||h("Details",!0),a||h("OpenInLabBanner",!0),(0,i.jsxs)(i.Fragment,{children:["\n",(0,i.jsx)(s.admonition,{title:"Hindi pa naisalin",type:"note",children:(0,i.jsx)(s.p,{children:"Ang pahinang ito ay hindi pa naisalin. Nakikita mo ang orihinal na bersyon sa Ingles."})}),"\n",(0,i.jsx)(a,{notebookPath:"docs/guides/serverless-run-first-workload.ipynb"}),"\n",(0,i.jsxs)(o,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"Package versions"})}),(0,i.jsx)(s.p,{children:"The code on this page was developed using the following requirements.\nWe recommend using these versions or newer."}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"qiskit[all]~=1.4.0\nqiskit-ibm-runtime~=0.36.1\nqiskit-ibm-catalog~=0.4\n"})})]}),"\n",(0,i.jsxs)(s.p,{children:["This section explores how to use ",(0,i.jsx)(s.code,{children:"qiskit-ibm-catalog"})," to list programs available in Qiskit Serverless, pass inputs into these programs, run them remotely, check their status, and retrieve results and logs."]}),"\n",(0,i.jsxs)(s.p,{children:["Be sure you have authenticated to Qiskit Serverless using your ",(0,i.jsx)(s.a,{href:"https://quantum.cloud.ibm.com/",children:"API key"})," (see ",(0,i.jsx)(s.a,{href:"./serverless-first-program#deploy-to-ibm-quantum-platform",children:"Deploy to IBM Quantum Platform"})," for instructions)."]}),"\n",(0,i.jsx)(s.h2,{id:"list-programs-available",children:"List programs available"}),"\n",(0,i.jsxs)(s.p,{children:["You can use ",(0,i.jsx)(s.code,{children:"QiskitServerless.list()"})," to fetch a list of the available programs to run with Qiskit Serverless. This includes the previously uploaded ",(0,i.jsx)(s.a,{href:"./serverless-first-program",children:(0,i.jsx)(s.code,{children:"transpile_remote_serverless"})}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'from qiskit_ibm_catalog import QiskitServerless\n\nserverless = QiskitServerless()\nnext(\n    program\n    for program in serverless.list()\n    if program.title == "transpile_remote_serverless"\n)\n'})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"QiskitFunction(transpile_remote_serverless)\n"})}),"\n",(0,i.jsx)(s.h2,{id:"run-an-uploaded-program-and-pass-inputs",children:"Run an uploaded program and pass inputs"}),"\n",(0,i.jsxs)(s.p,{children:["First, set up your inputs. Your program has three inputs: ",(0,i.jsx)(s.code,{children:"circuits"}),", ",(0,i.jsx)(s.code,{children:"backend"}),", and ",(0,i.jsx)(s.code,{children:"optimization_level"}),". You can use ",(0,i.jsx)(s.code,{children:"random_circuit"})," to create 30 random circuits:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'from qiskit.circuit.random import random_circuit\n\nqc_random = [(random_circuit(4, 4, measure=True, seed=i)) for i in range(10)]\nqc_random[0].draw(output="mpl", idle_wires=False)\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Output of the previous code cell",src:r(43103).A+"",width:"788",height:"353"})}),"\n",(0,i.jsxs)(s.p,{children:["Next, use ",(0,i.jsx)(s.code,{children:"QiskitRuntimeService"})," and ",(0,i.jsx)(s.code,{children:"least_busy"})," to select a ",(0,i.jsx)(s.code,{children:"backend"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"from qiskit_ibm_runtime import QiskitRuntimeService\n\nservice = QiskitRuntimeService()\nbackend = service.least_busy(operational=True, simulator=False)\nprint(backend.name)\n"})}),"\n",(0,i.jsx)(s.p,{children:"Set your optimization level:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"optimization_level = 3\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Select your program with ",(0,i.jsx)(s.code,{children:"serverless.load('PROGRAM_NAME')"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'transpile_remote_serverless = serverless.load("transpile_remote_serverless")\n'})}),"\n",(0,i.jsx)(s.p,{children:"Next, pass your inputs and run it in a pythonic fashion as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"job = transpile_remote_serverless.run(\n    circuits=qc_random,\n    backend=backend.name,\n    optimization_level=optimization_level,\n)\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"job.job_id\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"'118256c5-bbb0-4ea8-9e9f-51aac2220aef'\n"})}),"\n",(0,i.jsx)(s.h2,{id:"check-job-status",children:"Check job status"}),"\n",(0,i.jsxs)(s.p,{children:["With your Qiskit Serverless ",(0,i.jsx)(s.code,{children:"job_id"}),", you can check the status of running jobs. This includes the following statuses:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"QUEUED"})}),": The remote program is in the Qiskit Serverless queue. The queue priority is currently based on how much you've used Qiskit Serverless"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"INITIALIZING"})}),": The remote program is starting; this includes setting up the remote environment and installing dependencies"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"RUNNING"})}),": The program is running. At this stage, if you have ",(0,i.jsx)(s.code,{children:"print()"})," outputs in your program, you can retrieve logs using ",(0,i.jsx)(s.code,{children:"job.logs()"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"DONE"})}),": The program is complete, and you can retrieve data stored in ",(0,i.jsx)(s.code,{children:"save_result()"})," with ",(0,i.jsx)(s.code,{children:"job.results()"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["You can also set more detailed job statuses in ",(0,i.jsx)(s.a,{href:"/guides/serverless-manage-resources",children:"Manage Qiskit Serverless compute and data resources"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"job.status()\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"'QUEUED'\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'# This cell is hidden from users, it checks the job status\nassert _ in ["QUEUED", "INITIALIZING", "RUNNING", "DONE"]  # noqa: F821\n'})}),"\n",(0,i.jsx)(n,{type:"tip",children:(0,i.jsxs)(s.p,{children:["Currently, the IBM Quantum workloads table only reflects Qiskit Runtime workloads. Use ",(0,i.jsx)(s.code,{children:"job.status()"})," to see your Qiskit Serverless workload's current status."]})}),"\n",(0,i.jsx)(s.p,{children:"You've successfully run your first Qiskit Serverless program!"}),"\n",(0,i.jsx)(s.h2,{id:"retrieve-logs-and-results",children:"Retrieve logs and results"}),"\n",(0,i.jsxs)(s.p,{children:["As mentioned before, once a program is ",(0,i.jsx)(s.code,{children:"RUNNING"}),", you can use ",(0,i.jsx)(s.code,{children:"job.logs()"})," to fetch logs created from ",(0,i.jsx)(s.code,{children:"print()"})," outputs:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"logs = job.logs()\nprint(logs)\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"No logs yet.\n"})}),"\n",(0,i.jsx)(s.p,{children:"At any time, you can also cancel a job:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"job.stop()\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"'Job has been stopped.'\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Once a program is ",(0,i.jsx)(s.code,{children:"DONE"}),", you can use ",(0,i.jsx)(s.code,{children:"job.results()"})," to fetch the result stored in ",(0,i.jsx)(s.code,{children:"save_result()"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"# We can't get results from a cancelled job, so we'll fetch a completed one instead\ncompleted_job = next(\n    job for job in serverless.jobs() if job.status() == \"DONE\"\n)\ncompleted_job.result()\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"{'transpiled_circuits': [<qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93eca64810>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec5e5310>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec5d5310>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec58b490>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec57d310>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec535950>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec523c90>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec60a990>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec5527d0>,\n  <qiskit.circuit.quantumcircuit.QuantumCircuit at 0x7f93ec4152d0>]}\n"})}),"\n",(0,i.jsx)(s.h2,{id:"list-jobs-previously-run-with-qiskit-serverless",children:"List jobs previously run with Qiskit Serverless"}),"\n",(0,i.jsxs)(s.p,{children:["You can use ",(0,i.jsx)(s.code,{children:"jobs()"})," to list all jobs submitted to Qiskit Serverless:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"old_jobs = serverless.jobs()\nold_jobs\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"[<Job | 118256c5-bbb0-4ea8-9e9f-51aac2220aef>,\n <Job | e9a36469-7d6b-4f00-bf91-78709ebdbbff>,\n <Job | 4efd601b-8f61-4c8e-b14a-0b8a9c649dc0>,\n <Job | 87cd22c7-8eb9-4606-bdb4-befe946e9e9b>,\n <Job | be9a6dfd-0830-4250-aa60-acdd05bb8818>,\n <Job | 479513dd-6a76-4c3e-ba49-bb21351b9a05>,\n <Job | f9c20c31-be46-41b3-97ac-99f7be61f89e>,\n <Job | 37fa2489-4449-4bfb-974e-9d9a9ec3cc21>,\n <Job | b754c4e8-6817-48db-9bb9-74c151d6349a>,\n <Job | 78bc6744-b417-48cb-8e01-59bb63bcc2be>]\n"})}),"\n",(0,i.jsx)(s.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,i.jsx)(n,{type:"info",title:"Recommendations",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Explore ",(0,i.jsx)(s.a,{href:"./serverless-manage-resources",children:"compute and data management tools"})," available to your program, including parallelization."]}),"\n"]})})]})}function u(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}function h(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},43103(e,s,r){r.d(s,{A:()=>n});const n=r.p+"assets/images/46108a95-11f8-4ecf-83bb-131c3e7ea4c2-0-aaef929e94d1bd6e7948ef64e68f9ab2.svg"},28453(e,s,r){r.d(s,{R:()=>o,x:()=>a});var n=r(96540);const i={},t=n.createContext(i);function o(e){const s=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);