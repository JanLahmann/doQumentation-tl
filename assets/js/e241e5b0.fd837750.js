"use strict";(globalThis.webpackChunkdoqumentation=globalThis.webpackChunkdoqumentation||[]).push([[879],{8656(e,i,t){t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"guides/stretch","title":"Deferred timing resolution using stretch","description":"How to use stretch to defer timing resolution with dynamic circuits","source":"@site/i18n/tl/docusaurus-plugin-content-docs/current/guides/stretch.mdx","sourceDirName":"guides","slug":"/guides/stretch","permalink":"/guides/stretch","draft":false,"unlisted":false,"editUrl":"https://github.com/JanLahmann/doQumentation/tree/main/docs/guides/stretch.mdx","tags":[],"version":"current","frontMatter":{"title":"Deferred timing resolution using stretch","description":"How to use stretch to defer timing resolution with dynamic circuits"},"sidebar":"tutorialsSidebar","previous":{"title":"Classical feedforward and control flow (dynamic circuits)","permalink":"/guides/classical-feedforward-and-control-flow"},"next":{"title":"Measure qubits","permalink":"/guides/measure-qubits"}}');var a=t(74848),s=t(28453),r=t(11470),c=t(19365);const l={title:"Deferred timing resolution using stretch",description:"How to use stretch to defer timing resolution with dynamic circuits"},o="Deferred timing resolution using stretch",d={},u=[{value:"Examples",id:"examples",level:2},{value:"Dynamical decoupling",id:"dynamical-decoupling",level:3},{value:"Scheduling alignment",id:"scheduling-alignment",level:3},{value:"View stretch values in Qiskit Runtime",id:"view-stretch-values-in-qiskit-runtime",level:2},{value:"Understand the metadata output",id:"understand-the-metadata-output",level:3},{value:"Example",id:"example",level:3},{value:"Metadata output",id:"metadata-output",level:4},{value:"Qiskit Runtime limitations",id:"qiskit-runtime-limitations",level:2}];function h(e){const i={a:"a",admonition:"admonition",annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Admonition:n}=i;return n||function(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Admonition",!0),(0,a.jsxs)(a.Fragment,{children:["\n",(0,a.jsx)(i.admonition,{title:"Hindi pa naisalin",type:"note",children:(0,a.jsx)(i.p,{children:"Ang pahinang ito ay hindi pa naisalin. Nakikita mo ang orihinal na bersyon sa Ingles."})}),"\n","\n",(0,a.jsx)(i.header,{children:(0,a.jsx)(i.h1,{id:"deferred-timing-resolution-using-stretch",children:"Deferred timing resolution using stretch"})}),"\n",(0,a.jsxs)(i.p,{children:["The OpenQASM 3 language specification contains a ",(0,a.jsx)(i.code,{children:"stretch"})," type with which you can specify relative timing of operations instead of absolute timing. Support for ",(0,a.jsx)(i.code,{children:"stretch"})," as durations for ",(0,a.jsx)(i.a,{href:"https://docs.quantum.ibm.com/api/qiskit/circuit#qiskit.circuit.Delay",children:(0,a.jsx)(i.code,{children:"Delay"})})," instructions was added in ",(0,a.jsx)(i.a,{href:"https://docs.quantum.ibm.com/api/qiskit/release-notes/2.0#200",children:"Qiskit v2.0.0."})," The concrete value of a stretch duration is resolved at compile time, after the exact duration of calibrated gates are known.  The compiler tries to minimize the stretch duration, subject to timing constraints on one or more qubits. You can then express gate designs such as evenly spacing gates (for example, to implement a higher-order echo decoupling sequence), left-aligning a sequence of gates, or applying a gate for the duration of some sub-circuit, without knowing the exact timing."]}),"\n",(0,a.jsx)(i.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(i.h3,{id:"dynamical-decoupling",children:"Dynamical decoupling"}),"\n",(0,a.jsxs)(i.p,{children:["A common use case of ",(0,a.jsx)(i.code,{children:"stretch"})," is to apply dynamical decoupling to an idling qubit while another qubit is undergoing conditional operations."]}),"\n",(0,a.jsxs)(i.p,{children:["For example, we can use ",(0,a.jsx)(i.code,{children:"stretch"})," to apply an XX dynamical decoupling sequence to qubit 1, for the duration of the conditional block applied to qubit 0, as illustrated by the following diagram:"]}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"Image illustrating the following circuit",src:t(19930).A+"",width:"725",height:"325"})}),"\n",(0,a.jsx)(i.p,{children:"The corresponding circuit would look like the following. Note that a pair of barriers is needed to define the boundaries of this relative timing."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'from qiskit.circuit import QuantumCircuit, QuantumRegister, ClassicalRegister\nfrom qiskit.circuit.classical import expr\n\nqubits = QuantumRegister(2)\nclbits = ClassicalRegister(2)\ncircuit = QuantumCircuit(qubits, clbits)\n(q0, q1) = qubits\n(c0, c1) = clbits\n\n# Add barriers to define the boundaries\ncircuit.barrier()\ncircuit.h(q0)\ncircuit.measure(q0, c0)\nwith circuit.if_test((c0, 1)) as else_:\n    circuit.h(q0)\nwith else_:\n    circuit.x(q0)\n\n# Apply an XX DD sequence with stretch on qubit 1\ns = circuit.add_stretch("s")\ncircuit.delay(s, q1)\ncircuit.x(q1)\ncircuit.delay(expr.mul(s, 2), q1)\ncircuit.x(q1)\ncircuit.delay(s, q1)\ncircuit.barrier()\n'})}),"\n",(0,a.jsx)(i.h3,{id:"scheduling-alignment",children:"Scheduling alignment"}),"\n",(0,a.jsxs)(i.p,{children:["This example uses ",(0,a.jsx)(i.code,{children:"stretch"})," to ensure a sequence of gates between two barriers are left-aligned, whatever their actual durations are:"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'from qiskit import QuantumCircuit\nfrom numpy import pi\n\nqc = QuantumCircuit(5)\nqc.barrier()\nqc.cx(0, 1)\nqc.u(pi/4, 0, pi/2, 2)\nqc.cx(3, 4)\n\na = qc.add_stretch("a")\nb = qc.add_stretch("b")\nc = qc.add_stretch("c")\n\n# Use the stretches as Delay duration.\nqc.delay(a, [0, 1])\nqc.delay(b, 2)\nqc.delay(c, [3, 4])\nqc.barrier()\n'})}),"\n",(0,a.jsxs)(n,{type:"note",children:[(0,a.jsxs)(i.p,{children:["When using ",(0,a.jsx)(i.code,{children:"stretch"})," with Qiskit Runtime, any remainder resulting from a stretch resolution is added to the first delay that uses the stretch."]}),(0,a.jsx)(i.p,{children:"Example:"}),(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'a = circuit.add_stretch("a")\ncircuit.barrier(q0, q1)\ncircuit.delay(100, q0)\ncircuit.delay(a, q1)  # resolve to 26\ncircuit.x(q1)  # duration: 8\ncircuit.delay(a, q1)  # resolve to 25\ncircuit.x(q1)  # duration: 8\ncircuit.delay(a, q1)  # resolve to 25\ncircuit.x(q1)  # duration: 8\ncircuit.barrier(q0, q1)\n'})}),(0,a.jsxs)(i.p,{children:["The above code resolves to a value of 25 with a remainder of 1. The first delay",(0,a.jsx)(i.code,{children:"[a]"})," will have the remainder added."]}),(0,a.jsxs)(i.p,{children:["Stretch resolution equation:  ",(0,a.jsxs)(i.span,{className:"katex",children:[(0,a.jsx)(i.span,{className:"katex-mathml",children:(0,a.jsx)(i.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(i.semantics,{children:[(0,a.jsxs)(i.mrow,{children:[(0,a.jsx)(i.mi,{children:"a"}),(0,a.jsx)(i.mo,{children:"+"}),(0,a.jsx)(i.mn,{children:"8"}),(0,a.jsx)(i.mo,{children:"+"}),(0,a.jsx)(i.mi,{children:"a"}),(0,a.jsx)(i.mo,{children:"+"}),(0,a.jsx)(i.mn,{children:"8"}),(0,a.jsx)(i.mo,{children:"+"}),(0,a.jsx)(i.mi,{children:"a"}),(0,a.jsx)(i.mo,{children:"+"}),(0,a.jsx)(i.mn,{children:"8"}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsx)(i.mn,{children:"100"}),(0,a.jsx)(i.mo,{children:"="}),(0,a.jsx)(i.mn,{children:"3"}),(0,a.jsx)(i.mo,{children:"\u2217"}),(0,a.jsx)(i.mi,{children:"a"}),(0,a.jsx)(i.mo,{children:"+"}),(0,a.jsx)(i.mn,{children:"24"})]}),(0,a.jsx)(i.annotation,{encoding:"application/x-tex",children:"a + 8 + a + 8 + a + 8 = 100   =   3*a + 24"})]})})}),(0,a.jsxs)(i.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(i.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"+"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(i.span,{className:"mord",children:"8"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"+"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(i.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"+"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(i.span,{className:"mord",children:"8"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"+"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(i.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"+"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(i.span,{className:"mord",children:"8"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(i.span,{className:"mord",children:"100"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(i.span,{className:"mrel",children:"="}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(i.span,{className:"mord",children:"3"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"\u2217"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(i.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(i.span,{className:"mbin",children:"+"}),(0,a.jsx)(i.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(i.span,{className:"base",children:[(0,a.jsx)(i.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(i.span,{className:"mord",children:"24"})]})]})]})]})]}),"\n",(0,a.jsx)(i.h2,{id:"view-stretch-values-in-qiskit-runtime",children:"View stretch values in Qiskit Runtime"}),"\n",(0,a.jsxs)(i.p,{children:["The actual value of a stretch duration is resolved at compile time, after the circuit is scheduled. When running a Sampler job in Qiskit Runtime, you can view the resolved stretch values in the job result metadata.  Support for ",(0,a.jsx)(i.code,{children:"stretch"})," in Qiskit Runtime is currently experimental, so you need to first set an experimental option to enable its retrieval, then access the data directly from the metadata as follows:"]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'# Enable stretch value retrieval.\nsampler.options.experimental = {\n    "execution": {\n        "stretch_values": True,\n        "scheduler_timing": True,\n    },\n}\n\n# Access the stretch values from the metadata.\njob_result = job.result()\ncircuit_stretch_values = job_result[0].metadata["compilation"]["stretch_values"]\n\n# Visualize the timing.\n# Use the sliders at the bottom, the controls at the top, and the legend on the side \n# of the output to customize the view.\ndraw_circuit_schedule_timing(ob.result()[0].metadata[\'compilation\'][\'scheduler_timing\'][\'timing\'])\n'})}),"\n",(0,a.jsx)(n,{type:"note",children:(0,a.jsx)(i.p,{children:'Although the total circuit time is returned in the "compilation" metadata, this is NOT the time used for billing (quantum time).'})}),"\n",(0,a.jsx)(i.h3,{id:"understand-the-metadata-output",children:"Understand the metadata output"}),"\n",(0,a.jsxs)(i.p,{children:["The ",(0,a.jsx)(i.code,{children:"stretch_values"})," metadata returns the following information:"]}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Name:"})," The name of the applied stretch."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Value:"})," The requested goal value."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Remainder:"})," The remainder from resolving the stretch, which is added to the first delay that uses the stretch."]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.strong,{children:"Expanded values:"})," Sets of values that specify the stretch start and its duration."]}),"\n"]}),"\n",(0,a.jsx)(i.h3,{id:"example",children:"Example"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'# Define the circuit\ncircuit = QuantumCircuit(4)\nfoo = circuit.add_stretch("foo")\nbar = circuit.add_stretch("bar")\ncircuit.barrier()\ncircuit.cz(0, 1)\ncircuit.cz(0, 1)\ncircuit.cz(0, 1)\ncircuit.cz(0, 1)\n\ncircuit.delay(foo, 2)\ncircuit.x(2)\n# 3*foo\ncircuit.delay(expr.mul(3, foo), 2)\ncircuit.x(2)\n# 2*foo\ncircuit.delay(expr.mul(2, foo), 2)\n\ncircuit.delay(bar, 3)\ncircuit.x(3)\ncircuit.delay(bar, 3)\n\ncircuit.measure_all()\n'})}),"\n",(0,a.jsx)(i.h4,{id:"metadata-output",children:"Metadata output"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:" [{'name': 'bar',\n  'value': 29,\n  'remainder': 1,\n  'expanded_values': [[1365, 30], [1404, 29]]},\n {'name': 'foo',\n  'value': 8,\n  'remainder': 2,\n  'expanded_values': [[1365, 10], [1384, 24], [1417, 16]]}\n  ]\n"})}),"\n",(0,a.jsx)(i.p,{children:"The values returned for duration depend on the goal value and the calculated remainder.  For example, these are the durations returned for foo:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"foo value"})," + ",(0,a.jsx)(i.code,{children:"remainder"})," (8+2 = 10)"]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"foo value"})," * 3 (8 x 3 = 24)"]}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.code,{children:"foo value"})," * 2 (8 x 2 = 16)"]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"You can use a visualization to help understand and verify the timing."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:"draw_circuit_schedule_timing(job.result()[0].metadata['compilation']['scheduler_timing']['timing'])\n"})}),"\n",(0,a.jsxs)(i.p,{children:["In the following image, based on the example output, ",(0,a.jsx)(i.code,{children:"foo"})," corresponds to the stretches on Qubit 2. The first stretch delay that uses ",(0,a.jsx)(i.code,{children:"foo"})," starts at the end of the ",(0,a.jsx)(i.code,{children:"init_play"})," (1365). The stretch duration is 10, so that delay ends when the ",(0,a.jsx)(i.code,{children:"x"})," gate starts (1365+10=1375). You can interpret the second and third stretches similarly."]}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"The output from the draw_circuit_schedule_timing command is shown.",src:t(66475).A+"",width:"1400",height:"680"})}),"\n",(0,a.jsx)(i.p,{children:"Use the sliders at the bottom, the controls at the top (hover over your output image to reveal these), and the legend on the side of the output to customize the view. Hover over the image to view exact data."}),"\n",(0,a.jsxs)(i.p,{children:["For full details, see the ",(0,a.jsx)(i.a,{href:"/guides/visualize-circuit-timing#visualize-timings",children:"Visualize circuit timing"})," topic."]}),"\n",(0,a.jsx)(i.h2,{id:"qiskit-runtime-limitations",children:"Qiskit Runtime limitations"}),"\n",(0,a.jsxs)(i.p,{children:["Support for ",(0,a.jsx)(i.code,{children:"stretch"})," in Qiskit Runtime is currently experimental and has the following constraints:"]}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:["At most one stretch variable per ",(0,a.jsx)(i.em,{children:"qubit set"})," between barriers (implicit and explicit). A qubit set is one or more qubits; these sets must be mutually exclusive."]}),"\n",(0,a.jsxs)(r.A,{children:[(0,a.jsx)(c.A,{value:"Invalid",label:"Invalid",children:(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'a = circuit.add_stretch("a")\nb = circuit.add_stretch("b")\ncircuit.delay(a, (q0, q1))\ncircuit.delay(b, q0)  # Invalid because 2 stretches are applied on q0\n'})})}),(0,a.jsx)(c.A,{value:"Valid",label:"Valid",children:(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'a = circuit.add_stretch("a")\nb = circuit.add_stretch("b")\ncircuit.delay(a, (q0, q1))\ncircuit.delay(b, q2)\n'})})})]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:["The area surrounded by a set of barriers is called a ",(0,a.jsx)(i.em,{children:"barrier region"}),". A stretch variable cannot be used in multiple barrier regions."]}),"\n",(0,a.jsxs)(r.A,{children:[(0,a.jsxs)(c.A,{value:"Invalid",label:"Invalid",children:[(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'# Stretch a is used in two barrier regions\na = circuit.add_stretch("a")\ncircuit.barrier((q0, q1))\ncircuit.delay(a, q0)\ncircuit.barrier((q0, q1))\ncircuit.delay(a, q0)\ncircuit.barrier((q0, q1))\n'})}),(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"Illustration of the previous code output",src:t(56577).A+"",title:"Invalid use of stretch in barrier regions",width:"2078",height:"394"})})]}),(0,a.jsxs)(c.A,{value:"Valid",label:"Valid",children:[(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'# Stretch a is used inside a barrier region that is on q0 and q1\na = circuit.add_stretch("a")\ncircuit.barrier((q0, q1))\ncircuit.delay(a, q0)\ncircuit.barrier(q2)\ncircuit.delay(a, q0)\ncircuit.barrier((q0, q1))\n'})}),(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{alt:"Illustration of the previous code output",src:t(83573).A+"",title:"Valid use of stretch in a barrier region",width:"1966",height:"420"})})]})]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsxs)(i.p,{children:["Stretch expressions are limited to those of the form ",(0,a.jsx)(i.code,{children:"X*stretch + Y"})," where ",(0,a.jsx)(i.code,{children:"X"})," and ",(0,a.jsx)(i.code,{children:"Y"})," are floating point or integer constants."]}),"\n",(0,a.jsxs)(r.A,{children:[(0,a.jsx)(c.A,{value:"Invalid",label:"Invalid",children:(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'a = circuit.add_stretch("a")\nb = circuit.add_stretch("b")\nc = circuit.add_stretch("c")\n\n# (a /  b) * c is not supported\ncircuit.delay(expr.mul(expr.div(a, b), c), q1)\n'})})}),(0,a.jsx)(c.A,{value:"Valid",label:"Valid",children:(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'from qiskit.circuit import Duration\n\na = circuit.add_stretch("a")\ncircuit.delay(expr.add(expr.mul(a, 2), Duration.dt(3)), 0)\n'})})})]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsx)(i.p,{children:"Stretch expressions can only include a single stretch variable."}),"\n",(0,a.jsxs)(r.A,{children:[(0,a.jsx)(c.A,{value:"Invalid",label:"Invalid",children:(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'a = circuit.add_stretch("a")\nb = circuit.add_stretch("b")\ncircuit.delay(expr.add(a, b), 0)\n'})})}),(0,a.jsx)(c.A,{value:"Valid",label:"Valid",children:(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'a = circuit.add_stretch("a")\ncircuit.delay(expr.add(a, a), 0)\n'})})})]}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsx)(i.p,{children:"Stretch expressions cannot resolve to negative delay values. The current solver doesn't infer non-negativity constraints."}),"\n",(0,a.jsxs)(r.A,{children:[(0,a.jsx)(c.A,{value:"Invalid",label:"Invalid",children:(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:"from qiskit.circuit import Duration\n\ncircuit.barrier((q0, q1))\ncircuit.delay(20, q1)\n# The length of this barrier region is 20dt, meaning the\n# equation for solving stretch 'a' is a + 40dt = 20dt, giving a = -20dt.\ncircuit.delay(expr.add(a, Duration.dt(40)), q0)\ncircuit.barrier((q0, q1))\n"})})}),(0,a.jsx)(c.A,{value:"Valid",label:"Valid",children:(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:"circuit.barrier((q0, q1))\ncircuit.delay(20, q1)\ncircuit.delay(a, q0)\ncircuit.barrier((q0, q1))\n"})})})]}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},19365(e,i,t){t.d(i,{A:()=>r});t(96540);var n=t(34164);const a="tabItem_Ymn6";var s=t(74848);function r({children:e,hidden:i,className:t}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(a,t),hidden:i,children:e})}},11470(e,i,t){t.d(i,{A:()=>w});var n=t(96540),a=t(34164),s=t(17559),r=t(23104),c=t(56347),l=t(205),o=t(57485),d=t(31682),u=t(70679);function h(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:i}=e;return!!i&&"object"==typeof i&&"value"in i}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:i,children:t}=e;return(0,n.useMemo)(()=>{const e=i??function(e){return h(e).map(({props:{value:e,label:i,attributes:t,default:n}})=>({value:e,label:i,attributes:t,default:n}))}(t);return function(e){const i=(0,d.XI)(e,(e,i)=>e.value===i.value);if(i.length>0)throw new Error(`Docusaurus error: Duplicate values "${i.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[i,t])}function p({value:e,tabValues:i}){return i.some(i=>i.value===e)}function A({queryString:e=!1,groupId:i}){const t=(0,c.W6)(),a=function({queryString:e=!1,groupId:i}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:e,groupId:i});return[(0,o.aZ)(a),(0,n.useCallback)(e=>{if(!a)return;const i=new URLSearchParams(t.location.search);i.set(a,e),t.replace({...t.location,search:i.toString()})},[a,t])]}function x(e){const{defaultValue:i,queryString:t=!1,groupId:a}=e,s=m(e),[r,c]=(0,n.useState)(()=>function({defaultValue:e,tabValues:i}){if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${i.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=i.find(e=>e.default)??i[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:i,tabValues:s})),[o,d]=A({queryString:t,groupId:a}),[h,x]=function({groupId:e}){const i=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,a]=(0,u.Dv)(i);return[t,(0,n.useCallback)(e=>{i&&a.set(e)},[i,a])]}({groupId:a}),g=(()=>{const e=o??h;return p({value:e,tabValues:s})?e:null})();(0,l.A)(()=>{g&&c(g)},[g]);return{selectedValue:r,selectValue:(0,n.useCallback)(e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),x(e)},[d,x,s]),tabValues:s}}var g=t(92303);const j="tabList__CuJ",b="tabItem_LNqP";var f=t(74848);function v({className:e,block:i,selectedValue:t,selectValue:n,tabValues:s}){const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),o=e=>{const i=e.currentTarget,a=c.indexOf(i),r=s[a].value;r!==t&&(l(i),n(r))},d=e=>{let i=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;i=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;i=c[t]??c[c.length-1];break}}i?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":i},e),children:s.map(({value:e,label:i,attributes:n})=>(0,f.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{c.push(e)},onKeyDown:d,onClick:o,...n,className:(0,a.A)("tabs__item",b,n?.className,{"tabs__item--active":t===e}),children:i??e},e))})}function y({lazy:e,children:i,selectedValue:t}){const s=(Array.isArray(i)?i:[i]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===t);return e?(0,n.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:s.map((e,i)=>(0,n.cloneElement)(e,{key:i,hidden:e.props.value!==t}))})}function q(e){const i=x(e);return(0,f.jsxs)("div",{className:(0,a.A)(s.G.tabs.container,"tabs-container",j),children:[(0,f.jsx)(v,{...i,...e}),(0,f.jsx)(y,{...i,...e})]})}function w(e){const i=(0,g.A)();return(0,f.jsx)(q,{...e,children:h(e.children)},String(i))}},56577(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/bad-barrier-region-6a05419df645b27f6c69d5d3a71c9c4e.avif"},83573(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/good-barrier-region-f9a3cd520babd8fdcbf76ff95a2e8a3d.avif"},66475(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/stretch-visualization-a8b7f36b61c11ee6f6560b5a2d6e3db4.avif"},19930(e,i,t){t.d(i,{A:()=>n});const n="data:image/avif;base64,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"},28453(e,i,t){t.d(i,{R:()=>r,x:()=>c});var n=t(96540);const a={},s=n.createContext(a);function r(e){const i=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(s.Provider,{value:i},e.children)}}}]);