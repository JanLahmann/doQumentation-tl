"use strict";(globalThis.webpackChunkdoqumentation=globalThis.webpackChunkdoqumentation||[]).push([[9731],{97669(e,i,n){n.r(i),n.d(i,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/configure-error-mitigation","title":"Configure error mitigation","description":"How to configure error mitigation with Qiskit Runtime.","source":"@site/i18n/tl/docusaurus-plugin-content-docs/current/guides/configure-error-mitigation.mdx","sourceDirName":"guides","slug":"/guides/configure-error-mitigation","permalink":"/guides/configure-error-mitigation","draft":false,"unlisted":false,"editUrl":"https://github.com/JanLahmann/doQumentation/tree/main/docs/guides/configure-error-mitigation.mdx","tags":[],"version":"current","frontMatter":{"title":"Configure error mitigation","sidebar_label":"Configure error mitigation","description":"How to configure error mitigation with Qiskit Runtime.","notebook_path":"docs/guides/configure-error-mitigation.ipynb"},"sidebar":"tutorialsSidebar","previous":{"title":"Error mitigation and suppression techniques","permalink":"/guides/error-mitigation-and-suppression-techniques"},"next":{"title":"Configure error suppression","permalink":"/guides/configure-error-suppression"}}');var r=n(74848),o=n(28453),s=n(11470),a=n(19365);const l={title:"Configure error mitigation",sidebar_label:"Configure error mitigation",description:"How to configure error mitigation with Qiskit Runtime.",notebook_path:"docs/guides/configure-error-mitigation.ipynb"},c=void 0,u={},d=[{value:"Configure Estimator with resilience levels",id:"configure-estimator-with-resilience-levels",level:2},{value:"Example",id:"example",level:3},{value:"Custom error settings",id:"custom-error-settings",level:2},{value:"Turn off all error mitigation",id:"turn-off-all-error-mitigation",level:2},{value:"Next steps",id:"next-steps",level:2}];function h(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components},{Admonition:t,Details:l,OpenInLabBanner:c}=i;return t||p("Admonition",!0),l||p("Details",!0),c||p("OpenInLabBanner",!0),(0,r.jsxs)(r.Fragment,{children:["\n",(0,r.jsx)(i.admonition,{title:"Hindi pa naisalin",type:"note",children:(0,r.jsx)(i.p,{children:"Ang pahinang ito ay hindi pa naisalin. Nakikita mo ang orihinal na bersyon sa Ingles."})}),"\n",(0,r.jsx)(c,{notebookPath:"docs/guides/configure-error-mitigation.ipynb"}),"\n","\n",(0,r.jsx)(t,{type:"note",title:"New execution model, now in beta release",children:(0,r.jsxs)(i.p,{children:["The beta release of a new execution model is now available. The directed execution model provides more flexibility when customizing your error mitigation workflow. See the ",(0,r.jsx)(i.a,{href:"/guides/directed-execution-model",children:"Directed execution model"})," guide for more information."]})}),"\n","\n",(0,r.jsxs)(l,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Package versions"})}),(0,r.jsx)(i.p,{children:"The code on this page was developed using the following requirements.\nWe recommend using these versions or newer."}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"qiskit-ibm-runtime~=0.43.1\n"})})]}),"\n",(0,r.jsx)(i.p,{children:"Error mitigation techniques allow users to mitigate circuit errors by\nmodeling the device noise at the time of execution. This typically\nresults in quantum pre-processing overhead related to model training and\nclassical post-processing overhead to mitigate errors in the raw results\nby using the generated model."}),"\n",(0,r.jsxs)(i.p,{children:["The Estimator primitive supports several error mitigation techniques, including ",(0,r.jsx)(i.a,{href:"https://docs.quantum.ibm.com/api/qiskit-ibm-runtime/options-resilience-options-v2#measure_mitigation",children:"TREX"}),", ",(0,r.jsx)(i.a,{href:"https://docs.quantum.ibm.com/api/qiskit-ibm-runtime/options-resilience-options-v2#zne",children:"ZNE"}),", ",(0,r.jsx)(i.a,{href:"https://docs.quantum.ibm.com/api/qiskit-ibm-runtime/options-resilience-options-v2#pec",children:"PEC"}),", and ",(0,r.jsx)(i.a,{href:"https://docs.quantum.ibm.com/api/qiskit-ibm-runtime/options-zne-options",children:"PEA"}),". See ",(0,r.jsx)(i.a,{href:"error-mitigation-and-suppression-techniques",children:"Error mitigation and suppression techniques"})," for an explanation of each. When using primitives, you can turn on or off individual methods. See the ",(0,r.jsx)(i.a,{href:"#advanced-error",children:"Custom error settings"})," section for details."]}),"\n",(0,r.jsx)(t,{type:"note",children:(0,r.jsxs)(i.p,{children:["Sampler does not support error mitigation, but you can use the ",(0,r.jsx)(i.a,{href:"https://qiskit.github.io/qiskit-addon-mthree/",children:"mthree"})," (matrix-free measurement mitigation) package to perform error mitigation locally."]})}),"\n",(0,r.jsxs)(i.p,{children:["Estimator also supports ",(0,r.jsx)(i.code,{children:"resilience_level"}),". The resilience level specifies how much resilience to build against\nerrors. Higher levels generate more accurate results, at the expense of\nlonger processing times. Resilience levels can be used to configure the\ncost/accuracy trade-off when applying error mitigation to your primitive\nquery. Error mitigation reduces errors (bias) in results by processing\nthe outputs from a collection, or ensemble, of related circuits. The\ndegree of error reduction depends on the method applied. The resilience\nlevel abstracts the detailed choice of error mitigation method to allow\nusers to reason about the cost/accuracy trade that is appropriate to\ntheir application."]}),"\n",(0,r.jsx)(i.p,{children:"Given this, each level corresponds to a method or methods with\nincreasing level of quantum sampling overhead to enable you experiment\nwith different time-accuracy tradeoffs. The following table shows you\nwhich levels and corresponding methods are available for each of the\nprimitives."}),"\n",(0,r.jsx)(t,{type:"info",title:"Attention",children:(0,r.jsx)(i.p,{children:"Error mitigation is task-specific, so the techniques you can\napply vary based whether you are sampling a distribution or generating\nexpectation values."})}),"\n",(0,r.jsx)("span",{id:"resilience-table"}),"\n",(0,r.jsx)(i.p,{children:"Estimator supports the following resilience levels.  Sampler does not support resilience levels."}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Resilience Level"}),(0,r.jsx)(i.th,{children:"Definition"}),(0,r.jsx)(i.th,{children:"Technique"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"0"}),(0,r.jsx)(i.td,{children:"No mitigation"}),(0,r.jsx)(i.td,{children:"None"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"1 [Default]"}),(0,r.jsx)(i.td,{children:"Minimal mitigation costs: Mitigate error associated with readout errors"}),(0,r.jsx)(i.td,{children:"Twirled Readout Error eXtinction  (TREX) measurement twirling"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"2"}),(0,r.jsx)(i.td,{children:"Medium mitigation costs. Typically reduces bias in estimators, but is not guaranteed to be zero-bias."}),(0,r.jsx)(i.td,{children:"Level 1 + Zero Noise Extrapolation (ZNE) and gate twirling"})]})]})]}),"\n",(0,r.jsx)(t,{type:"info",title:"Attention",children:(0,r.jsx)(i.p,{children:"Resilience levels are currently in beta so sampling overhead and\nsolution quality will vary from circuit to circuit. New features,\nadvanced options, and management tools will be released on a rolling\nbasis. Specific error mitigation methods are not guaranteed to be\napplied at each resilience level."})}),"\n",(0,r.jsx)(i.h2,{id:"configure-estimator-with-resilience-levels",children:"Configure Estimator with resilience levels"}),"\n",(0,r.jsxs)(i.p,{children:["You can use resilience levels to specify error mitigation techniques, or you can set custom techniques individually as described in ",(0,r.jsx)(i.a,{href:"#advanced-error",children:"Custom error settings."})]}),"\n",(0,r.jsxs)(l,{children:[(0,r.jsx)("summary",{children:"Resilience Level 0"}),(0,r.jsx)(i.p,{children:"No error mitigation is applied to the user program."})]}),"\n",(0,r.jsxs)(l,{children:[(0,r.jsx)("summary",{children:"Resilience Level 1"}),(0,r.jsxs)(i.p,{children:["Level 1 applies ",(0,r.jsx)(i.strong,{children:"readout error mitigation"})," and ",(0,r.jsx)(i.strong,{children:"measurement twirling"})," by applying a model-free technique known\nas Twirled Readout Error eXtinction (TREX). It reduces measurement error\nby diagonalizing the noise channel associated with measurement by\nrandomly flipping qubits through X gates immediately before measurement. A\nrescaling term from the diagonal noise channel is learned by\nbenchmarking random circuits initialized in the zero state. This allows\nthe service to remove bias from expectation values that result from\nreadout noise. This approach is described further in ",(0,r.jsx)(i.a,{href:"https://arxiv.org/abs/2012.09738",children:"Model-free\nreadout-error mitigation for quantum expectation\nvalues"}),"."]})]}),"\n",(0,r.jsxs)(l,{children:[(0,r.jsx)("summary",{children:"Resilience Level 2"}),(0,r.jsxs)(i.p,{children:["Level 2 applies the ",(0,r.jsx)(i.strong,{children:"error mitigation techniques included in level 1"})," and also applies ",(0,r.jsx)(i.strong,{children:"gate twirling"})," and uses the ",(0,r.jsx)(i.strong,{children:"Zero Noise Extrapolation method (ZNE)"}),".  ZNE computes an\nexpectation value of the observable for different noise factors\n(amplification stage) and then uses the measured expectation values to\ninfer the ideal expectation value at the zero-noise limit (extrapolation\nstage). This approach tends to reduce errors in expectation values, but\nis not guaranteed to produce an unbiased result."]}),(0,r.jsx)(i.p,{children:(0,r.jsx)(i.img,{alt:"This image shows a graph.  The x-axis is labeled Noise amplification factor.  The y-axis is labeled Expectation value.  An upward sloping line is labeled Mitigated value.  Points near the line are noise-amplified values.  There is a horizontal line just above the X-axis labeled Exact value.",src:n(27993).A+"",title:"Illustration of the ZNE method",width:"1024",height:"659"})}),(0,r.jsx)(i.p,{children:"The overhead of this method scales with the number of noise factors. The\ndefault settings sample the expectation value at three noise factors,\nleading to a roughly 3x overhead when employing this resilience level."}),(0,r.jsxs)(i.p,{children:["In Level 2, the TREX method randomly flips qubits through X gates immediately before measurement,\nand flips the corresponding measured bit if an X gate was applied. This approach is described further in ",(0,r.jsx)(i.a,{href:"https://arxiv.org/abs/2012.09738",children:"Model-free\nreadout-error mitigation for quantum expectation\nvalues"}),"."]})]}),"\n",(0,r.jsx)(i.h3,{id:"example",children:"Example"}),"\n",(0,r.jsxs)(i.p,{children:["The ",(0,r.jsx)(i.code,{children:"EstimatorV2"})," interface lets users seamlessly work with the variety of\nerror mitigation methods to reduce error in expectation values of\nobservables. The following code uses Zero Noise Extrapolation and readout error mitigation by simply\nsetting ",(0,r.jsx)(i.code,{children:"resilience_level 2"}),"."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:'from qiskit_ibm_runtime import QiskitRuntimeService\nfrom qiskit_ibm_runtime import EstimatorV2 as Estimator\n\nservice = QiskitRuntimeService()\nbackend = service.least_busy(operational=True, simulator=False)\n\n# Setting options during primitive initialization\nestimator = Estimator(backend, options={"resilience_level": 2})\n'})}),"\n",(0,r.jsx)("span",{id:"advanced-error"}),"\n",(0,r.jsx)(i.h2,{id:"custom-error-settings",children:"Custom error settings"}),"\n",(0,r.jsxs)(i.p,{children:["You can turn on and off individual error mitigation and suppression methods, including dynamical decoupling, gate and measurement twirling, measurement error mitigation, PEC, and ZNE. See ",(0,r.jsx)(i.a,{href:"error-mitigation-and-suppression-techniques",children:"Error mitigation and suppression techniques"})," for an explanation of each."]}),"\n",(0,r.jsx)(t,{type:"note",title:"Notes",children:(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Not all options are available for both primitives.   See the ",(0,r.jsx)(i.a,{href:"runtime-options-overview#options-table",children:"available options table"})," for the list of available options."]}),"\n",(0,r.jsxs)(i.li,{children:["Not all methods work together on all types of circuits.  See the ",(0,r.jsx)(i.a,{href:"runtime-options-overview#options-compatibility-table",children:"feature compatibility table"})," for details."]}),"\n"]})}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(a.A,{value:"Estimator",label:"Estimator",children:(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:'from qiskit_ibm_runtime import QiskitRuntimeService\nfrom qiskit_ibm_runtime import EstimatorV2 as Estimator\n\nservice = QiskitRuntimeService()\nbackend = service.least_busy(operational=True, simulator=False)\n\nestimator = Estimator(backend)\noptions = estimator.options\n# Turn on gate twirling.\noptions.twirling.enable_gates = True\n# Turn on measurement error mitigation.\noptions.resilience.measure_mitigation = True\n\nprint(f">>> gate twirling is turned on: {estimator.options.twirling.enable_gates}")\nprint(f">>> measurement error mitigation is turned on: {estimator.options.resilience.measure_mitigation}")\n'})})}),(0,r.jsx)(a.A,{value:"Sampler",label:"Sampler",children:(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:'from qiskit_ibm_runtime import SamplerV2 as Sampler\n\n# Estimator and Sampler have different options\nsampler = Sampler(backend)\noptions = sampler.options\n\noptions.dynamical_decoupling.enable = True\n# Turn on gate twirling. Requires qiskit_ibm_runtime 0.23.0 or later.\noptions.twirling.enable_gates = True\n\nprint(f">>> dynamical decoupling is turned on: {sampler.options.dynamical_decoupling.enable}")\nprint(f">>> gate twirling is turned on: {sampler.options.twirling.enable_gates}")\n\n'})})})]}),"\n",(0,r.jsx)(i.h2,{id:"turn-off-all-error-mitigation",children:"Turn off all error mitigation"}),"\n",(0,r.jsxs)(i.p,{children:["For instructions to turn off all error mitigation, see the ",(0,r.jsx)(i.a,{href:"specify-runtime-options#no-error-mitigation",children:"Turn off all error suppression and mitigation"})," section."]}),"\n",(0,r.jsx)(i.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,r.jsx)(t,{type:"tip",title:"Recommendations",children:(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Walk through an example that uses error mitigation in the ",(0,r.jsx)(i.a,{href:"/learning/courses/variational-algorithm-design/cost-functions",children:"Cost function lesson"})," in IBM Quantum Learning."]}),"\n",(0,r.jsxs)(i.li,{children:["Learn more about ",(0,r.jsx)(i.a,{href:"error-mitigation-and-suppression-techniques",children:"error mitigation and error suppression techniques."})]}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"configure-error-suppression",children:"Configure error suppression."})}),"\n",(0,r.jsxs)(i.li,{children:["Explore other ",(0,r.jsx)(i.a,{href:"runtime-options-overview",children:"options."})]}),"\n",(0,r.jsxs)(i.li,{children:["Decide what ",(0,r.jsx)(i.a,{href:"execution-modes",children:"execution mode"})," to run your job in."]}),"\n"]})})]})}function m(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}function p(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},19365(e,i,n){n.d(i,{A:()=>s});n(96540);var t=n(34164);const r="tabItem_Ymn6";var o=n(74848);function s({children:e,hidden:i,className:n}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,t.A)(r,n),hidden:i,children:e})}},11470(e,i,n){n.d(i,{A:()=>k});var t=n(96540),r=n(34164),o=n(17559),s=n(23104),a=n(56347),l=n(205),c=n(57485),u=n(31682),d=n(70679);function h(e){return t.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:i}=e;return!!i&&"object"==typeof i&&"value"in i}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:i,children:n}=e;return(0,t.useMemo)(()=>{const e=i??function(e){return h(e).map(({props:{value:e,label:i,attributes:n,default:t}})=>({value:e,label:i,attributes:n,default:t}))}(n);return function(e){const i=(0,u.XI)(e,(e,i)=>e.value===i.value);if(i.length>0)throw new Error(`Docusaurus error: Duplicate values "${i.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[i,n])}function p({value:e,tabValues:i}){return i.some(i=>i.value===e)}function g({queryString:e=!1,groupId:i}){const n=(0,a.W6)(),r=function({queryString:e=!1,groupId:i}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:e,groupId:i});return[(0,c.aZ)(r),(0,t.useCallback)(e=>{if(!r)return;const i=new URLSearchParams(n.location.search);i.set(r,e),n.replace({...n.location,search:i.toString()})},[r,n])]}function f(e){const{defaultValue:i,queryString:n=!1,groupId:r}=e,o=m(e),[s,a]=(0,t.useState)(()=>function({defaultValue:e,tabValues:i}){if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${i.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=i.find(e=>e.default)??i[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:i,tabValues:o})),[c,u]=g({queryString:n,groupId:r}),[h,f]=function({groupId:e}){const i=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,r]=(0,d.Dv)(i);return[n,(0,t.useCallback)(e=>{i&&r.set(e)},[i,r])]}({groupId:r}),x=(()=>{const e=c??h;return p({value:e,tabValues:o})?e:null})();(0,l.A)(()=>{x&&a(x)},[x]);return{selectedValue:s,selectValue:(0,t.useCallback)(e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);a(e),u(e),f(e)},[u,f,o]),tabValues:o}}var x=n(92303);const b="tabList__CuJ",v="tabItem_LNqP";var j=n(74848);function y({className:e,block:i,selectedValue:n,selectValue:t,tabValues:o}){const a=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),c=e=>{const i=e.currentTarget,r=a.indexOf(i),s=o[r].value;s!==n&&(l(i),t(s))},u=e=>{let i=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=a.indexOf(e.currentTarget)+1;i=a[n]??a[0];break}case"ArrowLeft":{const n=a.indexOf(e.currentTarget)-1;i=a[n]??a[a.length-1];break}}i?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":i},e),children:o.map(({value:e,label:i,attributes:t})=>(0,j.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{a.push(e)},onKeyDown:u,onClick:c,...t,className:(0,r.A)("tabs__item",v,t?.className,{"tabs__item--active":n===e}),children:i??e},e))})}function w({lazy:e,children:i,selectedValue:n}){const o=(Array.isArray(i)?i:[i]).filter(Boolean);if(e){const e=o.find(e=>e.props.value===n);return e?(0,t.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map((e,i)=>(0,t.cloneElement)(e,{key:i,hidden:e.props.value!==n}))})}function E(e){const i=f(e);return(0,j.jsxs)("div",{className:(0,r.A)(o.G.tabs.container,"tabs-container",b),children:[(0,j.jsx)(y,{...i,...e}),(0,j.jsx)(w,{...i,...e})]})}function k(e){const i=(0,x.A)();return(0,j.jsx)(E,{...e,children:h(e.children)},String(i))}},27993(e,i,n){n.d(i,{A:()=>t});const t=n.p+"assets/images/resilience-2-d30e21159acd7d1acaa2c47130f06320.svg"},28453(e,i,n){n.d(i,{R:()=>s,x:()=>a});var t=n(96540);const r={},o=t.createContext(r);function s(e){const i=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:i},e.children)}}}]);