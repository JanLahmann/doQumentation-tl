"use strict";(globalThis.webpackChunkdoqumentation=globalThis.webpackChunkdoqumentation||[]).push([[6310],{89184(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/qiskit-1.0-installation","title":"Qiskit 1.0 installation and packaging changes","description":"Adapt to changes in installing and depending on Qiskit 1.0","source":"@site/i18n/tl/docusaurus-plugin-content-docs/current/guides/qiskit-1.0-installation.mdx","sourceDirName":"guides","slug":"/guides/qiskit-1.0-installation","permalink":"/guides/qiskit-1.0-installation","draft":false,"unlisted":false,"editUrl":"https://github.com/JanLahmann/doQumentation/tree/main/docs/guides/qiskit-1.0-installation.mdx","tags":[],"version":"current","frontMatter":{"title":"Qiskit 1.0 installation and packaging changes","description":"Adapt to changes in installing and depending on Qiskit 1.0"},"sidebar":"tutorialsSidebar","previous":{"title":"Understand the breaking package changes","permalink":"/guides/metapackage-migration"},"next":{"title":"Qiskit 1.0 feature migration guide","permalink":"/guides/qiskit-1.0-features"}}');var s=i(74848),r=i(28453),a=(i(11470),i(19365));const o={title:"Qiskit 1.0 installation and packaging changes",description:"Adapt to changes in installing and depending on Qiskit 1.0"},l="Install the new Qiskit 1.0 package",c={},d=[{value:"For users",id:"for-users",level:2},{value:"Create the new environment",id:"create-the-new-environment",level:3},{value:"Use the new environment",id:"use-the-new-environment",level:3},{value:"For developers",id:"for-developers",level:2},{value:"Recommendations for requirements",id:"recommendations-for-requirements",level:3},{value:"Recommendations for testing against Qiskit 1.0",id:"recommendations-for-testing-against-qiskit-10",level:3},{value:"Manually upgrade an existing environment",id:"manually-upgrade-an-existing-environment",level:4},{value:"Sample manual GitHub Actions workflows",id:"sample-manual-github-actions-workflows",level:4},{value:"Sample <code>tox</code> configuration",id:"sample-tox-configuration",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"<code>import qiskit</code> says &quot;ModuleNotFoundError: No module named &#39;qiskit&#39;&quot;",id:"import-qiskit-says-modulenotfounderror-no-module-named-qiskit",level:3},{value:"<code>import qiskit</code> succeeds, but trying to do anything returns &quot;AttributeError: module &#39;qiskit&#39; has no attribute &#39;...&#39;&quot;",id:"import-qiskit-succeeds-but-trying-to-do-anything-returns-attributeerror-module-qiskit-has-no-attribute-",level:3},{value:"<code>pip</code> refuses to install some packages together",id:"pip-refuses-to-install-some-packages-together",level:3},{value:"<code>pip</code> succeeds but prints errors after running <code>pip install</code> commands",id:"pip-succeeds-but-prints-errors-after-running-pip-install-commands",level:3},{value:"<code>import qiskit</code> raises <code>ImportError</code>",id:"import-qiskit-raises-importerror",level:3},{value:"Create a working environment for Qiskit 1.0",id:"create-a-working-environment-for-qiskit-10",level:4},{value:"Create a working environment for Qiskit 0.45 or 0.46",id:"create-a-working-environment-for-qiskit-045-or-046",level:4},{value:"I&#39;m a developer, my environments are definitely right, and I&#39;m still getting the error",id:"im-a-developer-my-environments-are-definitely-right-and-im-still-getting-the-error",level:4}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Admonition:i,OperatingSystemTabs:t}=n;return i||p("Admonition",!0),t||p("OperatingSystemTabs",!0),(0,s.jsxs)(s.Fragment,{children:["\n",(0,s.jsx)(n.admonition,{title:"Hindi pa naisalin",type:"note",children:(0,s.jsx)(n.p,{children:"Ang pahinang ito ay hindi pa naisalin. Nakikita mo ang orihinal na bersyon sa Ingles."})}),"\n","\n","\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"install-the-new-qiskit-10-package",children:"Install the new Qiskit 1.0 package"})}),"\n",(0,s.jsx)(n.p,{children:"Qiskit 1.0 uses a different packaging structure than previous Qiskit versions and will likely cause problems in environments that use packages that are not ready for Qiskit 1.0."}),"\n",(0,s.jsxs)(i,{type:"caution",children:[(0,s.jsx)(n.p,{children:"Do not try to upgrade an existing Python virtual environment to Qiskit 1.0 in-place."}),(0,s.jsx)(n.p,{children:"We will not make similar breaking packaging changes in the future. This is a one-time event, at the release of Qiskit 1.0, specifically so that our packaging story will be as easy as possible in the future."})]}),"\n",(0,s.jsx)(n.p,{children:"This guide is divided into the following sections.  You only need to review the sections that are relevant to you."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Users should read the ",(0,s.jsx)(n.a,{href:"#for-users",children:"For users"})," section."]}),"\n",(0,s.jsxs)(n.li,{children:["If you develop or maintain a package that depends on Qiskit, read the ",(0,s.jsx)(n.a,{href:"#for-developers",children:"For developers"})," section."]}),"\n",(0,s.jsxs)(n.li,{children:["If you encounter problems installing or importing Qiskit 1.0, review the ",(0,s.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})," section."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["If you are interested in understanding the old package structure and why it changed, review the ",(0,s.jsx)(n.a,{href:"./metapackage-migration",children:"overview of the breaking package changes"}),"."]}),"\n",(0,s.jsx)("span",{id:"for-users"}),"\n",(0,s.jsx)(n.h2,{id:"for-users",children:"For users"}),"\n",(0,s.jsx)(n.p,{children:"You must start a new virtual environment to install Qiskit 1.0.\nIt is very tricky and error-prone to upgrade an existing installation in-place to Qiskit 1.0."}),"\n",(0,s.jsxs)(i,{type:"note",children:[(0,s.jsxs)(n.p,{children:["The examples in this section use the ",(0,s.jsx)(n.code,{children:"venv"})," module that is part of the Python standard library.\nIf you use a different tool, such as ",(0,s.jsx)(n.code,{children:"virtualenv"})," or ",(0,s.jsx)(n.code,{children:"conda"}),", consult its documentation for help."]}),(0,s.jsx)(n.p,{children:"For Linux and macOS commands, a bash-like syntax is used.\nPowerShell is used for Windows commands."})]}),"\n",(0,s.jsx)("span",{id:"creating-a-venv"}),"\n",(0,s.jsx)(n.h3,{id:"create-the-new-environment",children:"Create the new environment"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a new virtual environment in each project directory you're working in, using your preferred version of Python 3.8 or later."}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)(a.A,{value:"mac",label:"macOS",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python3 -m venv .venv\n"})})}),(0,s.jsx)(a.A,{value:"linux",label:"Linux",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python3 -m venv .venv\n"})})}),(0,s.jsx)(a.A,{value:"win",label:"Windows",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-powershell",children:"python -m venv .venv\n"})})})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)("span",{id:"activate"}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Activate the environment."}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)(a.A,{value:"mac",label:"macOS",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source .venv/bin/activate\n"})})}),(0,s.jsx)(a.A,{value:"linux",label:"Linux",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source .venv/bin/activate\n"})})}),(0,s.jsx)(a.A,{value:"win",label:"Windows",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-powershell",children:".venv\\Scripts\\activate.ps1\n"})})})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Install packages as desired.\nYou should do this by using only one ",(0,s.jsx)(n.code,{children:"pip install"})," command with all the dependencies on it."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install 'qiskit>=1'\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can optionally include additional packages by including them as arguments.  For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install 'qiskit>=1' jupyterlab pandas matplotlib\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Qiskit 1.0 includes breaking changes, so several packages are marked as not-yet-compatible with it.  Therefore, you might see errors from ",(0,s.jsx)(n.code,{children:"pip"})," until new versions of those packages are released. Old versions of packages might also depend on the legacy ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," package.  Such packages might not return errors when running this command, but might raise an error when running ",(0,s.jsx)(n.code,{children:"import qiskit"}),".  You should not install any packages that depend directly on ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),"."]}),"\n",(0,s.jsxs)(i,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["One way to require ",(0,s.jsx)(n.code,{children:"pip"})," to forbid ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," from individual ",(0,s.jsx)(n.code,{children:"install"})," commands is to use ",(0,s.jsx)(n.a,{href:"https://pip.pypa.io/en/stable/user_guide/#constraints-files",children:"a constraints file"})," that requires that ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," is set to an impossible version.\nFor example, a constraints file that includes the line ",(0,s.jsx)(n.code,{children:"qiskit-terra>=1.0"})," will mean that if a dependency attempts to install ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),", no published versions will match the requirements."]}),(0,s.jsxs)(n.p,{children:["We have provided such a file in a GitHub Gist at ",(0,s.jsx)(n.a,{href:"https://qisk.it/1-0-constraints",children:"https://qisk.it/1-0-constraints"}),", which you can use like this:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install -c https://qisk.it/1-0-constraints qiskit [other packages]\n"})}),(0,s.jsxs)(n.p,{children:["If a package requires ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),", you will see ",(0,s.jsx)(n.a,{href:"#pip-resolution-impossible",children:"a resolution failure"}),"."]})]}),"\n",(0,s.jsx)(i,{type:"caution",children:(0,s.jsx)(n.p,{children:"Do not install packages that are incompatible with Qiskit 1.0 on this virtual environment.  If you need to use such packages, install them in a separate virtual environment with Qiskit 0.45 or 0.46."})}),"\n",(0,s.jsxs)(n.p,{children:["If you have an existing environment, you can use ",(0,s.jsx)(n.a,{href:"https://github.com/tox-dev/pipdeptree/blob/main/README.md#pipdeptree",children:(0,s.jsx)(n.code,{children:"pipdeptree"})})," to query the requirements of your installed packages to see if they require ",(0,s.jsx)(n.code,{children:"qiskit<1"}),".  For any that require ",(0,s.jsx)(n.code,{children:"qiskit<1"}),", check for updates that make it compatible with Qiskit 1.0."]}),"\n",(0,s.jsxs)(n.p,{children:["If you encounter issues, consult the ",(0,s.jsx)(n.a,{href:"#troubleshooting",children:"troubleshooting"})," section, or ask on ",(0,s.jsx)(n.a,{href:"https://qisk.it/join-slack",children:"Qiskit Slack"}),". If you think there is a bug, you can ",(0,s.jsx)(n.a,{href:"https://github.com/Qiskit/qiskit/issues/new/choose",children:"create an issue against Qiskit"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If you are not planning to use the environment immediately, use the ",(0,s.jsx)(n.code,{children:"deactivate"})," command to leave it."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)("span",{id:"activating-a-venv"}),"\n",(0,s.jsx)(n.h3,{id:"use-the-new-environment",children:"Use the new environment"}),"\n",(0,s.jsxs)(n.p,{children:['Each time you start a new command line session, you must navigate to your project directory and "activate" the environment by running the ',(0,s.jsx)(n.code,{children:"activate"})," command:"]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)(a.A,{value:"mac",label:"macOS",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source .venv/bin/activate\n"})})}),(0,s.jsx)(a.A,{value:"linux",label:"Linux",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"source .venv/bin/activate\n"})})}),(0,s.jsx)(a.A,{value:"win",label:"Windows",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-powershell",children:".venv\\Scripts\\activate.ps1\n"})})})]}),"\n",(0,s.jsx)("span",{id:"for-developers"}),"\n",(0,s.jsx)(n.h2,{id:"for-developers",children:"For developers"}),"\n",(0,s.jsx)(n.p,{children:"If you maintain a package that depends on Qiskit, use this information to learn how to correctly express your compatibility and test against Qiskit 1.0."}),"\n",(0,s.jsx)(n.h3,{id:"recommendations-for-requirements",children:"Recommendations for requirements"}),"\n",(0,s.jsxs)(n.p,{children:["We recommend that your package requires ",(0,s.jsx)(n.code,{children:"qiskit>=0.45,<1"})," (or other appropriate lower bound) if you are not certain whether the package is compatible with Qiskit 1.0.\nThis is ",(0,s.jsx)(n.a,{href:"https://github.com/numpy/numpy/issues/24300",children:"the same recommendation being made for NumPy 2.0 compatibility."})]}),"\n",(0,s.jsx)(n.p,{children:"A Qiskit 1.0 release candidate, version 1.0.0rc1, will be released on 1 February 2024.\nYou should test your package against this, and as soon as possible, release a new (compatible) version of your package with its upper requirement unpinned."}),"\n",(0,s.jsx)(n.h3,{id:"recommendations-for-testing-against-qiskit-10",children:"Recommendations for testing against Qiskit 1.0"}),"\n",(0,s.jsxs)(n.p,{children:["These recommendations apply to testing proactively against the Qiskit ",(0,s.jsx)(n.code,{children:"main"})," branch, and to testing against the 1.0.0rc1 (and later, if applicable) release candidate."]}),"\n",(0,s.jsxs)(n.p,{children:["We do not recommend initially branch-protecting on CI success against the Qiskit ",(0,s.jsx)(n.code,{children:"main"})," branch because Qiskit changes could prevent you from merging PRs.\nAfter the release of Qiskit release candidates, and after all of your package's dependencies support Qiskit 1.0, we ",(0,s.jsx)(n.em,{children:"do"})," recommend branch-protecting on success against the latest release candidate, to ensure that the package remains compatible with Qiskit 1.0."]}),"\n",(0,s.jsxs)(n.p,{children:["If neither your package, nor any of its transitive dependencies, has a requirement pin on ",(0,s.jsx)(n.code,{children:"qiskit<1"}),", you should create a testing virtual environment as you normally would, in a single ",(0,s.jsx)(n.code,{children:"pip install"})," command, and directly specify ",(0,s.jsx)(n.code,{children:"qiskit==1.0.0rc1"})," or ",(0,s.jsx)(n.code,{children:"qiskit==git+https://github.com/Qiskit/qiskit.git@main"})," as appropriate.\nThis is the most reliable way to ensure that you have a completely valid environment."]}),"\n",(0,s.jsxs)(n.p,{children:["If the only component of your package's dependency graph that has a requirement pin on ",(0,s.jsx)(n.code,{children:"qiskit<1"})," is your own package, you might want to have your CI suite first temporarily patch your requirements file to allow Qiskit 1.0, and then install the environment in a single step as before.\nAlternatively, use the following rules for general-purpose environment upgrades, but switch to single-environment resolution as soon as feasible."]}),"\n",(0,s.jsx)(n.p,{children:"If at least one of your transitive dependencies does not yet have a release version that allows Qiskit 1.0 support, you must make manual changes.\nThere are several strategies to try, in approximate order of preference (most preferable to least):"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Install the problematic dependency from its own ",(0,s.jsx)(n.code,{children:"main"})," branch, if its development version has relaxed the pin, so you can build the test environment in a single step."]}),"\n",(0,s.jsx)(n.li,{children:"Exclude the use of that dependency from the test environment, if possible."}),"\n",(0,s.jsx)(n.li,{children:"Create a test environment in the same way you would normally, and then manually override it to use Qiskit 1.0."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"manually-upgrade-an-existing-environment",children:"Manually upgrade an existing environment"}),"\n",(0,s.jsx)(i,{type:"caution",children:(0,s.jsx)(n.p,{children:"This process deliberately creates an invalid environment.  Therefore, any test using it is less valid. Tests might appear to pass, but this does not guarantee that the package is compatible with Qiskit 1.0.  This could happen because the environment is not self-consistent and could contain files that do not exist in a valid environment, or the behavior of an overridden package might change with Qiskit 1.0."})}),"\n",(0,s.jsx)(i,{type:"note",children:(0,s.jsxs)(n.p,{children:["If one of your dependencies pins ",(0,s.jsx)(n.code,{children:"qiskit<1"})," even on their development branch, it might not work in any way with Qiskit 1.0, and if your tests cannot run because of this, you might have to wait for them (or work with them) to become compatible."]})}),"\n",(0,s.jsx)(n.p,{children:"To upgrade an environment in situ, follow these steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create an environment as usual, ensuring that there are no packages that extend the ",(0,s.jsx)(n.code,{children:"qiskit"})," or ",(0,s.jsx)(n.code,{children:"qiskit.providers"})," namespace installed."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Uninstall both ",(0,s.jsx)(n.code,{children:"qiskit"})," and ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," to make sure that neither is present:"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip uninstall --yes qiskit qiskit-terra\n"})}),"\n",(0,s.jsxs)(n.p,{children:["At this point, the environment's ",(0,s.jsx)(n.code,{children:"site-packages"})," should not contain a ",(0,s.jsx)(n.code,{children:"qiskit"})," directory. You don't need to verify this on every CI run, but if you are debugging a script locally, follow these steps to verify:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Run the following command from within the ",(0,s.jsx)(n.code,{children:"python"})," of the virtual environment:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import site\nprint(site.getsitepackages())\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Verify that those directories do not contain a ",(0,s.jsx)(n.code,{children:"qiskit"})," directory. If they do, you likely have namespace-extending packages installed, and you should find these and remove the dependency."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Install the target version of Qiskit 1.0 with one of these commands:"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["After the  desired release candidate has been published:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install 'qiskit==1.0.0rc1'\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["For a ",(0,s.jsx)(n.code,{children:"main"}),"-branch dependency (or substitute whatever ",(0,s.jsx)(n.code,{children:"git"})," revision identifier you prefer after the ",(0,s.jsx)(n.code,{children:"@"}),").","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install 'git+https://github.com/Qiskit/qiskit.git@main'\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You now have an environment that Qiskit allows you to test in. If ",(0,s.jsx)(n.code,{children:"import qiskit"})," results in an ",(0,s.jsx)(n.code,{children:"ImportError"}),", or if you are struggling to find your dependencies, see the advice in the section about the  ",(0,s.jsx)(n.a,{href:"#qiskit-1.0-import-error",children:"invalid-environment protections"})," in Qiskit."]}),"\n",(0,s.jsx)(n.h4,{id:"sample-manual-github-actions-workflows",children:"Sample manual GitHub Actions workflows"}),"\n",(0,s.jsxs)(n.p,{children:["The following workflows set up a scheduled job to run overnight.  This job sets up a testing environment for Qiskit 1.0 and runs ",(0,s.jsx)(n.code,{children:"pytest"})," (or whatever test steps you need)."]}),"\n",(0,s.jsxs)(n.p,{children:["For a package that has no transitive dependencies ",(0,s.jsx)(n.code,{children:"qiskit<1"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"on:\n  schedule:\n    - cron: '0 3 * * *'\njobs:\n  test_main:\n    name: Test Qiskit main\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.10'\n      - name: Create environment\n        run: |\n          set -e\n          # First ensure the standard tools are up-to-date.\n          python -m pip install --upgrade pip wheel setuptools\n          # Note that this resolves everything in a single command.\n          # If it fails, at least one package likely requires `qiskit<1`.\n          python -m pip install --upgrade \\\n            -c constraints.txt \\\n            -r requirements-dev.txt \\\n            . \\\n            'git+https://github.com/Qiskit/qiskit.git@main'\n      - name: Run tests\n        run: pytest\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For a package that has unavoidable transitive dependencies that pin ",(0,s.jsx)(n.code,{children:"qiskit<1"}),", build an invalid environment:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"on:\n  schedule:\n    - cron: '0 3 * * *'\njobs:\n  test_main:\n    name: Test Qiskit main\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.10'\n      - name: Create environment\n        run: |\n          set -e\n          python -m pip install --upgrade pip wheel setuptools\n          # Install the regular test environment.\n          python -m pip install --upgrade \\\n            -c constraints.txt \\\n            -r requirements-dev.txt \\\n            .\n          # Uninstall `qiskit` and `qiskit-terra`.\n          python -m pip uninstall --yes qiskit qiskit-terra\n          # Install the new version of Qiskit\n          python -m pip install 'git+https://github.com/Qiskit/qiskit.git@main'\n      - name: Run tests\n        run: pytest\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"sample-tox-configuration",children:["Sample ",(0,s.jsx)(n.code,{children:"tox"})," configuration"]}),"\n",(0,s.jsxs)(n.p,{children:["The following are examples of ",(0,s.jsx)(n.code,{children:"tox.ini"})," sections to build a testing environment for Qiskit 1.0 and run ",(0,s.jsx)(n.code,{children:"pytest"})," (or whatever test steps you need)."]}),"\n",(0,s.jsx)(n.p,{children:"If nothing prevents Qiskit 1.0 from being installed in a valid environment:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[tox]\nminversion = 4.0.0\n\n# This environment section should set up your regular test build.\n# We'll extend it after, and this one is just an example.\n[testenv]\ninstall_command = pip install -c {toxinidir}/constraints.txt -U {opts} {packages}\ndeps =\n    -r{toxinidir}/requirements-dev.txt\ncommands =\n    pytest\n\n# This is an override environment to install Qiskit main.\n# We're assuming that you have a requirement like `qiskit>=0.45`\n# in your packages metadata requirements.\n[testenv:qiskit-main]\n# Inherit the base dependencies, and add the additional requirement.\ndeps =\n  [{testenv}deps]\n  git+https://github.com/Qiskit/qiskit@main\n# All other options, like the `commands` section, are inherited from `testenv`.\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If your package or a transitive dependency has an unavoidable pin on ",(0,s.jsx)(n.code,{children:"qiskit<1"}),", we recommend doing this testing using the manual environment construction as in the above section, because ",(0,s.jsx)(n.code,{children:"tox"})," introduces several complexities by being more strict about environment isolation and installation order.\nThis is correct behavior by ",(0,s.jsx)(n.code,{children:"tox"})," (we shouldn't construct an invalid environment), but because we already know we're building an invalid environment, these checks get in the way."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[tox]\nminversion = 4.0.0\n\n# This environment section should set up your regular test build.\n# We'll extend it later.  This is just an example.\n[testenv]\ninstall_command = pip install -c {toxinidir}/constraints.txt -U {opts} {packages}\ndeps =\n    -r{toxinidir}/requirements-dev.txt\ncommands =\n    pytest\n\n[testenv:qiskit-main]\n# Set a sequence of commands to run in the environment after everything has been installed,\n# but before the main test suite.\ncommands_pre =\n  pip uninstall --yes qiskit qiskit-terra\n  pip install 'git+https://github.com/Qiskit/qiskit@main'\n# All other sections, like the dependencies and the 'commands' section are inherited.\n"})}),"\n",(0,s.jsx)("span",{id:"troubleshooting"}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsxs)(n.p,{children:["The packaging changes around Qiskit 1.0 are tricky, and Python's standard tool ",(0,s.jsx)(n.code,{children:"pip"})," is not rich enough in some ways for us to communicate the changes in the distribution structures to it, which unfortunately might cause issues for users.\nWe have tried to make Qiskit fail quickly and loudly if it detects an invalid environment, without false positives.\nWe understand that users might find it annoying to get the error message, but in our experience, it's much better to be aware of the problem right away than for things to appear to be working on the surface, only to fail in subtle ways in the future."]}),"\n",(0,s.jsx)(n.p,{children:"This section contains packaging errors that you might see, and describes how to resolve them."}),"\n",(0,s.jsx)(n.p,{children:"Most of these problems are not unique to Qiskit, so the advice is likely relevant, even if the problematic parts are not related to Qiskit."}),"\n",(0,s.jsxs)(n.h3,{id:"import-qiskit-says-modulenotfounderror-no-module-named-qiskit",children:[(0,s.jsx)(n.code,{children:"import qiskit"})," says \"ModuleNotFoundError: No module named 'qiskit'\""]}),"\n",(0,s.jsx)(n.p,{children:"Python cannot find your Qiskit installation."}),"\n",(0,s.jsxs)(n.p,{children:["If you definitely installed Qiskit, then you probably do not have the correct virtual environment activated.\nSee the ",(0,s.jsx)(n.a,{href:"#activating-a-venv",children:"section on activating a virtual environment"})," for instructions."]}),"\n",(0,s.jsxs)(n.p,{children:["If you are using Jupyter and see this, ensure that Jupyter is installed into the same virtual environment as Qiskit.\nExit Jupyter, activate the Qiskit virtual environment on the command line, run ",(0,s.jsx)(n.code,{children:"pip install jupyterlab"})," (or whichever notebook interface you use), then reopen Jupyter."]}),"\n",(0,s.jsxs)(n.h3,{id:"import-qiskit-succeeds-but-trying-to-do-anything-returns-attributeerror-module-qiskit-has-no-attribute-",children:[(0,s.jsx)(n.code,{children:"import qiskit"})," succeeds, but trying to do anything returns \"AttributeError: module 'qiskit' has no attribute '...'\""]}),"\n",(0,s.jsx)(n.p,{children:"This likely means that your environment had an old version of Qiskit in it alongside a package that extended its namespace (such as old versions of Qiskit Aer, or the long-obsolete Qiskit IBM Q\xae Provider), and then Qiskit was uninstalled.\nThe easiest thing to do is to start a new virtual environment, and only install recent, non-obsolete packages into it."}),"\n",(0,s.jsxs)(n.p,{children:["If you have just started a new virtual environment, or you're sure that legacy packages are not the problem, make sure that your current working directory (the directory your shell session was in when you launched Python / Jupyter) does not contain a folder called ",(0,s.jsx)(n.code,{children:"qiskit"}),".\nPython's default rules search the current working directory very early in the search path when trying to ",(0,s.jsx)(n.code,{children:"import"})," a module, so a directory with a duplicate name can cause import problems."]}),"\n",(0,s.jsx)("span",{id:"pip-resolution-impossible"}),"\n",(0,s.jsxs)(n.h3,{id:"pip-refuses-to-install-some-packages-together",children:[(0,s.jsx)(n.code,{children:"pip"})," refuses to install some packages together"]}),"\n",(0,s.jsxs)(n.p,{children:["After running a ",(0,s.jsx)(n.code,{children:"pip install"})," command with many items on it, you might see an error such as:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"ERROR: Cannot install qiskit-dynamics==0.4.4 and qiskit==1.0.0 because these package versions have conflicting dependencies.\n\nThe conflict is caused by:\n    The user requested qiskit==1.0.0\n    qiskit-dynamics 0.4.4 depends on qiskit<1.0\n\nTo fix this you could try to:\n1. loosen the range of package versions you've specified\n2. remove package versions to allow pip attempt to solve the dependency conflict\n\nERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts\n"})}),"\n",(0,s.jsx)(n.p,{children:"This describes a true resolution conflict; there is no valid way to install all of these distributions at the same time."}),"\n",(0,s.jsxs)(n.p,{children:["In the context of Qiskit 1.0, this is likely because one of the distributions you are trying to install contains a requirement like ",(0,s.jsx)(n.code,{children:"qiskit<1.0"}),".\nThis means that the developers of that distribution have marked it as not (yet) compatible with Qiskit 1.0."]}),"\n",(0,s.jsx)(n.p,{children:"You can (politely) ask those developers when they will release a new version of their package that is compatible with Qiskit 1.0, but first check that they have no open issue or pull request already asking for this wherever they accept comments.\nBe mindful that this takes time; please give the developers a month or so to prepare new versions of their distributions!\nUntil then, you cannot install that distribution alongside Qiskit 1.0.\nTo continue using that distribution, create a new virtual environment and use Qiskit 0.45 or 0.46 (or whichever version it supports) alongside that other package."}),"\n",(0,s.jsx)(i,{type:"caution",children:(0,s.jsxs)(n.p,{children:["If you get this error, ",(0,s.jsx)(n.strong,{children:"do not"})," try to build the environment by calling ",(0,s.jsx)(n.code,{children:"pip install"})," several times.\nThose commands will probably not fail, but you will have created an invalid environment.\nYou would likely then see some of the other error messages described in this section."]})}),"\n",(0,s.jsxs)(n.p,{children:["You can also read ",(0,s.jsx)(n.a,{href:"https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts",children:"the documentation from the Python packaging authority about conflict resolution"}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"pip-succeeds-but-prints-errors-after-running-pip-install-commands",children:[(0,s.jsx)(n.code,{children:"pip"})," succeeds but prints errors after running ",(0,s.jsx)(n.code,{children:"pip install"})," commands"]}),"\n",(0,s.jsxs)(n.p,{children:["You might see an error in the output of ",(0,s.jsx)(n.code,{children:"pip"}),", such as the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behavior is the source of the following dependency conflicts.\nsome-distribution 0.4.4 requires qiskit>=0.44,<1, but you have qiskit 1.0.0 which is incompatible.\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The top line usually appears verbatim (as of ",(0,s.jsx)(n.code,{children:"pip"})," 23.3), but second line changes depending on the exact problem, and there may be several lines like it.\n",(0,s.jsx)(n.code,{children:"pip"})," is likely to then indicate that it did whatever you wanted successfully, despite the error message."]}),"\n",(0,s.jsxs)(n.p,{children:["This means that the environment is in conflict and you cannot be sure that it will work correctly.\nTo solve the problem, examine the list of messages from ",(0,s.jsx)(n.code,{children:"pip"})," and determine if you need all of the packages that have conflicting requirements.\nSometimes there will be true conflicts between dependencies; you might need multiple virtual environments to separate out dependencies that have incompatible requirements."]}),"\n",(0,s.jsx)(n.p,{children:"The safest choice is to begin a new virtual environment (or more than one, if there are true conflicts), then delete the one in conflict."}),"\n",(0,s.jsxs)(n.p,{children:["When setting up virtual environments, run only one ",(0,s.jsx)(n.code,{children:"pip install"})," command that includes all the dependencies you need.\nThis is the most reliable way for ",(0,s.jsx)(n.code,{children:"pip"})," to find a properly resolved environment with no conflicts.\nIf you keep having problems with conflicts after setting up environments, avoid running any further ",(0,s.jsx)(n.code,{children:"pip install"})," or ",(0,s.jsx)(n.code,{children:"pip uninstall"})," commands; ",(0,s.jsx)(n.code,{children:"pip"})," does not guarantee to keep the environment coherent on subsequent commands."]}),"\n",(0,s.jsx)(i,{type:"note",children:(0,s.jsx)(n.p,{children:"If you are concerned about working with multiple virtual environments, rest assured that Python development and use often involve several virtual environments. It's common and good practice to create new ones to work on separate projects.\nWhen you're done with a virtual environment, you can simply delete its directory; there is no reason to keep multiple environments permanently."})}),"\n",(0,s.jsx)("span",{id:"qiskit-1.0-import-error"}),"\n",(0,s.jsxs)(n.h3,{id:"import-qiskit-raises-importerror",children:[(0,s.jsx)(n.code,{children:"import qiskit"})," raises ",(0,s.jsx)(n.code,{children:"ImportError"})]}),"\n",(0,s.jsxs)(n.p,{children:["When running ",(0,s.jsx)(n.code,{children:"import qiskit"}),", you might see an error such as:"]}),"\n",(0,s.jsx)(n.p,{children:"ImportError: Qiskit is installed in an invalid environment that has both Qiskit 1.0+ and an earlier version.\nYou should create a new virtual environment, and ensure that you do not mix dependencies between Qiskit pre-1.0 and post-1.0.\nAny packages that depend on 'qiskit-terra' are not compatible with Qiskit 1.0 and will need to be updated.\nQiskit unfortunately cannot enforce this requirement during environment resolution."}),"\n",(0,s.jsx)(i,{type:"tip",children:(0,s.jsxs)(n.p,{children:["You might have run a completely valid ",(0,s.jsx)(n.code,{children:"pip install"})," command, following all the recommendations in this guide, and still see this error message.\nThis is not your fault, but the error message is still correct, and Qiskit cannot safely load."]})}),"\n",(0,s.jsxs)(n.p,{children:["The error means that Qiskit is installed in an invalid environment that includes both Qiskit 1.0 and an earlier version.\nThis is characterized by the ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," distribution being installed alongside Qiskit 1.0.\nYou can check what distributions are installed by running ",(0,s.jsx)(n.code,{children:"pip list"}),", but you cannot fix this by simply uninstalling ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Unfortunately, ",(0,s.jsx)(n.code,{children:"qiskit>=1.0"})," and ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," are conflicting distributions, and cannot both be installed together.\nEven more unfortunately, ",(0,s.jsxs)(n.em,{children:["we cannot communicate this conflict to ",(0,s.jsx)(n.code,{children:"pip"})]})," because of limitations in its metadata system."]}),"\n",(0,s.jsx)(n.p,{children:"This error most frequently arises in one of two situations:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["You ran something like ",(0,s.jsx)(n.code,{children:"pip install 'qiskit>=1' something-else"}),", and ",(0,s.jsx)(n.code,{children:"something-else"})," has a requirement on ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["You tried to run ",(0,s.jsx)(n.code,{children:"pip install -U qiskit"})," in an existing environment."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In both of these cases, there is no guarantee that ",(0,s.jsx)(n.code,{children:"pip"})," will return a helpful message to you."]}),"\n",(0,s.jsxs)(i,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["One way to require ",(0,s.jsx)(n.code,{children:"pip"})," to forbid ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," from individual ",(0,s.jsx)(n.code,{children:"install"})," commands is to use ",(0,s.jsx)(n.a,{href:"https://pip.pypa.io/en/stable/user_guide/#constraints-files",children:"a constraints file"})," that requires that ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," is set to an impossible version.\nFor example, a constraints file that includes the line ",(0,s.jsx)(n.code,{children:"qiskit-terra>=1.0"})," will mean that if a dependency attempts to install ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),", no published versions will match the requirements."]}),(0,s.jsxs)(n.p,{children:["We have provided such a file in a GitHub Gist at ",(0,s.jsx)(n.a,{href:"https://qisk.it/1-0-constraints",children:"https://qisk.it/1-0-constraints"}),", which you can use like this:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install -c https://qisk.it/1-0-constraints qiskit [other packages]\n"})}),(0,s.jsxs)(n.p,{children:["If a package requires ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),", you will see ",(0,s.jsx)(n.a,{href:"#pip-resolution-impossible",children:"a resolution failure"}),"."]})]}),"\n",(0,s.jsx)("span",{id:"debug-venv-for-1.0"}),"\n",(0,s.jsx)(n.h4,{id:"create-a-working-environment-for-qiskit-10",children:"Create a working environment for Qiskit 1.0"}),"\n",(0,s.jsx)(n.p,{children:"No matter how this happened, it is much easier to make a new virtual environment."}),"\n",(0,s.jsxs)(n.p,{children:["First, we need to find out which packages are introducing a dependency on ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),".\nUsing the broken environment, install ",(0,s.jsx)(n.code,{children:"pipdeptree"})," from PyPI. This is a tool for generating dependency graphs:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install pipdeptree\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Ask it which packages are introducing dependencies on ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," and ",(0,s.jsx)(n.code,{children:"qiskit"})," (these are two separate commands):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pipdeptree --reverse --package qiskit-terra\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pipdeptree --reverse --package qiskit\n"})}),"\n",(0,s.jsx)(n.p,{children:"The outputs might look something like:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"qiskit-terra==0.45.2\n\u2514\u2500\u2500 qiskit-dynamics==0.4.2 [requires: qiskit-terra>=0.23.0]\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"qiskit==1.0.0\n\u251c\u2500\u2500 qiskit-aer==0.13.2 [requires: qiskit>=0.45.0]\n\u2514\u2500\u2500 qiskit-ibm-provider==0.8.0 [requires: qiskit>=0.45.0]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In the above example, we have two distributions that have declared themselves compatible with Qiskit 1.0 (",(0,s.jsx)(n.code,{children:"qiskit-aer"})," and ",(0,s.jsx)(n.code,{children:"qiskit-ibm-provider"}),"), and one that still has a dependency on ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),"."]}),"\n",(0,s.jsx)(i,{type:"tip",children:(0,s.jsxs)(n.p,{children:["This example is a flat dependency structure.\nYou might see a much deeper tree than this.\nThe packages that are directly dependent on ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," (lowest indentation) are most likely to be the problematic ones, but one farther down the tree could be problematic if it depends on a specific old version of some other package that has already been updated."]})}),"\n",(0,s.jsxs)(n.p,{children:["Seeing a dependency on ",(0,s.jsx)(n.code,{children:"qiskit-terra"})," can mean one of a few things:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The dependent is an old package, and will not be updated to support Qiskit 1.0."}),"\n",(0,s.jsxs)(n.p,{children:["In this case, there is no chance of using the package with Qiskit 1.0, and you will need to continue using a previous version of Qiskit.\nTypically this is characterized by the dependent being at its latest version (assuming the environment is new, and you didn't pin it lower) and having a direct requirement on ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The dependent is a package that is actively maintained, but does not yet support Qiskit 1.0."}),"\n",(0,s.jsxs)(n.p,{children:["In this case, you will need to wait for the developers to release a compatible version - please be patient!\nTypically this is characterized by the installed distribution ",(0,s.jsx)(n.em,{children:"not"})," being at its latest version, even though your installation command did not specify a version.\nYou can check the latest release version of the distribution by finding its page on ",(0,s.jsx)(n.a,{href:"https://pypi.org/",children:"https://pypi.org/"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"pip"})," likely searched old versions of the package until it found one (possibly from months or years ago) that depended only on ",(0,s.jsx)(n.code,{children:"qiskit-terra"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["This is what has happened in the example above.  At the time this document was created, ",(0,s.jsx)(n.code,{children:"qiskit-dynamics==0.4.4"})," was the latest release version."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["If you constructed this environment out of several ",(0,s.jsx)(n.code,{children:"pip install"})," commands (such as if the environment is old and has been updated), first try to install all of your packages by using a single ",(0,s.jsx)(n.code,{children:"pip install"})," command when you build a new environment.\nIf the problem persists, at least one of the packages you want likely does not support Qiskit 1.0 yet, and ",(0,s.jsx)(n.code,{children:"pip"})," is finding an old version that it believes will work because it doesn't know about the ",(0,s.jsx)(n.code,{children:"qiskit>=1"}),"/",(0,s.jsx)(n.code,{children:"qiskit-terra"})," conflict."]}),"\n",(0,s.jsxs)(n.p,{children:["Instead, use the ",(0,s.jsx)(n.code,{children:"pipdeptree"})," commands to identify which dependencies do not yet support Qiskit 1.0.\nExclude any packages that do not yet support Qiskit 1.0 when constructing a Qiskit 1.0 environment, or continue to use a prior version of Qiskit.\nSee ",(0,s.jsx)(n.a,{href:"#creating-a-venv",children:"Create the new environment"})," for instructions."]}),"\n",(0,s.jsxs)(i,{type:"note",children:[(0,s.jsx)(n.p,{children:"The example in this section was generated before Qiskit 1.0 was released."}),(0,s.jsxs)(n.p,{children:['The "old" distribution in question (',(0,s.jsx)(n.code,{children:"qiskit-dynamics"}),") was behaving correctly; it was not known to support Qiskit 1.0 yet, so it marked that in its requirements.\nIt's not possible to backdate requirements changes to previously released versions, and ",(0,s.jsx)(n.code,{children:"pip"})," will search arbitrarily far back to locate something that works when building an environment."]})]}),"\n",(0,s.jsx)("span",{id:"debug-venv-for-0.45"}),"\n",(0,s.jsx)(n.h4,{id:"create-a-working-environment-for-qiskit-045-or-046",children:"Create a working environment for Qiskit 0.45 or 0.46"}),"\n",(0,s.jsxs)(n.p,{children:["If you have a broken environment after trying to install Qiskit 0.45 or 0.46, the most likely situation is that ",(0,s.jsx)(n.code,{children:"pip"})," installed Qiskit 1.0 because it tried to pick the latest versions of packages, even though it was not required.\nThe easiest way to fix this is to create a new virtual environment, then run a single ",(0,s.jsx)(n.code,{children:"pip install"})," command that has all the packages you need, plus an explicit ",(0,s.jsx)(n.code,{children:"'qiskit<1'"})," entry.\nIf ",(0,s.jsx)(n.code,{children:"pip"})," successfully resolves this dependency graph, you should have a working virtual environment.\nIf at least one distribution requires Qiskit 1.0 or greater, ",(0,s.jsx)(n.code,{children:"pip"})," should give you an error message explaining this, which looks like the one in ",(0,s.jsx)(n.a,{href:"#pip-resolution-impossible",children:"the section on failed resolutions"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["You can also use the ",(0,s.jsx)(n.code,{children:"pipdeptree"})," commands listed in ",(0,s.jsx)(n.a,{href:"#debug-venv-for-1.0",children:"Create a working environment for Qiskit 1.0"})," from within the broken environment to determine which distributions have an explicit requirement on ",(0,s.jsx)(n.code,{children:"qiskit>=1"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"im-a-developer-my-environments-are-definitely-right-and-im-still-getting-the-error",children:"I'm a developer, my environments are definitely right, and I'm still getting the error"}),"\n",(0,s.jsxs)(n.p,{children:["First: you must be ",(0,s.jsx)(n.em,{children:"absolutely"})," certain that your environments are correct.\nThe test that Qiskit uses to determine a broken environment is quite robust; specifically, it queries ",(0,s.jsx)(n.code,{children:"importlib.metadata"})," for distribution information on installed packages and checks the version numbers returned.\nThe Qiskit 1.0 side of the test also checks for sentinel files that were present in old Qiskit versions and not Qiskit 1.0."]}),"\n",(0,s.jsxs)(n.p,{children:["If you are a Qiskit developer, it's possible that you have old ",(0,s.jsx)(n.code,{children:"qiskit.egg-info"})," or ",(0,s.jsx)(n.code,{children:"qiskit-terra.egg-info"})," (or ",(0,s.jsx)(n.code,{children:"*.dist-info"}),") directories present on your meta path (see ",(0,s.jsx)(n.code,{children:"sys.meta_path"}),"), left over from old editable installations.\nIn particular, check your working directory for any ",(0,s.jsx)(n.code,{children:"*.egg-info"})," and ",(0,s.jsx)(n.code,{children:"*.dist-info"})," directories.\nIf they're in the root of one of your checked out repositories, you can delete them. The worst that can happen is you might need to ",(0,s.jsx)(n.code,{children:"pip install -e ."})," again, and even that is unlikely, because these are typically just part of the ",(0,s.jsx)(n.code,{children:"setuptools"})," build process that doesn't get cleaned up."]}),"\n",(0,s.jsx)(n.p,{children:"If the above information does not help you and you are 100% sure that your environment is sound (or you are deliberately trying to test a broken environment):"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/Qiskit/qiskit/issues/new/choose",children:"Create an issue in Qiskit"})," explaining how this happened and why you are sure the environment is correct so we can fix it."]}),"\n",(0,s.jsxs)(n.li,{children:["You can suppress the exception by setting the environment variable ",(0,s.jsx)(n.code,{children:"QISKIT_SUPPRESS_1_0_IMPORT_ERROR=1"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}function p(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},19365(e,n,i){i.d(n,{A:()=>a});i(96540);var t=i(34164);const s="tabItem_Ymn6";var r=i(74848);function a({children:e,hidden:n,className:i}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,t.A)(s,i),hidden:n,children:e})}},11470(e,n,i){i.d(n,{A:()=>q});var t=i(96540),s=i(34164),r=i(17559),a=i(23104),o=i(56347),l=i(205),c=i(57485),d=i(31682),h=i(70679);function u(e){return t.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:i}=e;return(0,t.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:i,default:t}})=>({value:e,label:n,attributes:i,default:t}))}(i);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,i])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function g({queryString:e=!1,groupId:n}){const i=(0,o.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(s),(0,t.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})},[s,i])]}function v(e){const{defaultValue:n,queryString:i=!1,groupId:s}=e,r=p(e),[a,o]=(0,t.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const i=n.find(e=>e.default)??n[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:r})),[c,d]=g({queryString:i,groupId:s}),[u,v]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[i,s]=(0,h.Dv)(n);return[i,(0,t.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),x=(()=>{const e=c??u;return m({value:e,tabValues:r})?e:null})();(0,l.A)(()=>{x&&o(x)},[x]);return{selectedValue:a,selectValue:(0,t.useCallback)(e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),v(e)},[d,v,r]),tabValues:r}}var x=i(92303);const k="tabList__CuJ",y="tabItem_LNqP";var f=i(74848);function j({className:e,block:n,selectedValue:i,selectValue:t,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,a.a_)(),c=e=>{const n=e.currentTarget,s=o.indexOf(n),a=r[s].value;a!==i&&(l(n),t(a))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const i=o.indexOf(e.currentTarget)+1;n=o[i]??o[0];break}case"ArrowLeft":{const i=o.indexOf(e.currentTarget)-1;n=o[i]??o[o.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:r.map(({value:e,label:n,attributes:t})=>(0,f.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...t,className:(0,s.A)("tabs__item",y,t?.className,{"tabs__item--active":i===e}),children:n??e},e))})}function b({lazy:e,children:n,selectedValue:i}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===i);return e?(0,t.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==i}))})}function w(e){const n=v(e);return(0,f.jsxs)("div",{className:(0,s.A)(r.G.tabs.container,"tabs-container",k),children:[(0,f.jsx)(j,{...n,...e}),(0,f.jsx)(b,{...n,...e})]})}function q(e){const n=(0,x.A)();return(0,f.jsx)(w,{...e,children:u(e.children)},String(n))}},28453(e,n,i){i.d(n,{R:()=>a,x:()=>o});var t=i(96540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);